<?xml version="1.0" encoding="utf-8"?>
<mx:TitleWindow xmlns:mx="http://www.adobe.com/2006/mxml" layout="vertical" 
				xmlns:db="views.dashboard.*" 
				title="Sequencer Status - {conLabel}" 
				width="536" height="370">   

<mx:Style>
	Connected {
		fontWeight: bold;
		color: green;
	}
	
	Disconnected {
		fontWeight: bold;
		color: red;
	}
	
</mx:Style>				
				
<mx:Script>
	<![CDATA[
		
		// Imports
		
		// Variables
		[Bindable]
		private var conStatus:Boolean = false;
		
		[Bindable]
		private var conLabel:Label;
		
		[Bindable]
		public var activeRuns:int = 0;
		
		[Bindable]
		private var finishedRuns:int = 0;
		
		[Bindable]
		private var haltedRuns:int = 0;
		
		[Bindable]
		private var turnRuns:int = 0;
		
		public function init():void {
			// Retrieve initial SummaryCollection from MetrixServer using controller.
			
			// Set Connection status
			if(conStatus){
				conLabel.text = "Connected";
				conLabel.setStyle("Connected");
			}else{
				conLabel.text = "Disconnected";
				conLabel.setStyle("Disconnected");
			}
			
			// Set counts for global status counters
			 // activeRuns
			 // finishedRuns
			 // haltedRuns
			 // turnRuns
			
			// Set timer -- Polling with 10 minute interval.
			
		}
	]]>
</mx:Script>
	
	<mx:VBox width="100%" paddingBottom="4" paddingLeft="4" paddingRight="4" paddingTop="4">
		<mx:HBox width="100%" height="20" horizontalAlign="center">
			<mx:Label id="numActiveRuns" text="Active runs: {activeRuns}" />
			<mx:VRule />
			<mx:Label id="numFinishedRuns" text="Finished runs: {finishedRuns}" />
			<mx:VRule />
			<mx:Label id="numErrorRuns" text="Halted runs: {haltedRuns}" />
			<mx:VRule />
			<mx:Label id="numTurnRuns" text="Turn runs: {turnRuns}"/>
		</mx:HBox>
		<mx:HRule width="100%" />
			
			<mx:HBox id="titleContainer" width="100%" horizontalAlign="center" borderStyle="solid" borderThickness="1">
				<mx:Label id="mainTitle" text="Current Active Sequencing Machines" fontSize="18" />
			</mx:HBox>
			
			<mx:VBox width="100%" verticalScrollBar="auto">
				<!-- 
				Use Mx:Repeater for all available sequencing machines.
				Call GetRunsByState.gx - Create XML format? 
				-->
				
				<mx:Repeater id="repStatus" dataProvider="{}" startingIndex="1" count="3" >
					<mx:VBox borderStyle="solid" borderThickness="1" paddingBottom="4" paddingLeft="2" paddingRight="2" paddingTop="6" width="100%">
						<mx:HBox id="runProgress" width="100%">
							<mx:Label id="seqMachine1" text="{instrumentName}" />
							<mx:ProgressBar id="progress1" width="75%" label="%1 / %2 Cycles"
											labelPlacement="center" mode="manual" />
						</mx:HBox>
						<mx:HBox id="runInfo" width="100%">
							<mx:Label id="runId" text="Run name: {sumRunId}" /> <!-- Run identifier -->
							<mx:VRule height="20" />
							<mx:Label id="runType" text="Run type: {sumRunType}" />	<!-- Single End / Paired End-->
							<mx:VRule height="20" />
							<mx:Label id="runDate" text="Run date: {sumRunDate}" /> <!-- Start date of run -->
						</mx:HBox>
						<mx:Label id="runPhase" text="Current phase: {runPhase}" /> <!-- Current phase of run -->
					</mx:VBox>
				</mx:Repeater>
			</mx:VBox>
	</mx:VBox>
</mx:TitleWindow>
