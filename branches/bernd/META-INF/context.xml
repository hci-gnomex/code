<Context path="/gnomex" docBase="webapps/gnomex" debug="0" reloadable="true" allowLinking="true">


  <Valve
	    className="org.apache.catalina.valves.AccessLogValve"
	    directory="${catalina.home}/logs/"
	    prefix="gnomex-"
	    suffix=".log"
	    pattern="combined" />

	    
  <Resource auth="Container" 
    mail.smtp.host="${hci.mailserver}" 
    name="mail/MailSession" 
    type="javax.mail.Session"/>

    
  <!-- GNomEx Realm for authenticating user (LDAP) -->    
  <Realm className="hci.gnomex.security.tomcat.GNomExLDAPRealm"
         ldap_provider_url="${hci.gnomex.ldapurl}"
         ldap_protocol="ssl"
         ldap_auth_meth="simple"
         ldap_init_context_factory="com.sun.jndi.ldap.LdapCtxFactory"
         datasource_lookup_name="java:comp/env/jdbc/GNOMEX_GUEST"
    />
    
    <!-- 
         alt_ldap_provider_url="ldap://servername.somewhere.edu:port_number/ou=Domain%20Users,dc=blahblah,dc=blahblah,dc=blahblah"
         alt_ldap_auth_meth="simple"
         alt_ldap_init_context_factory="com.sun.jndi.ldap.LdapCtxFactory"
         alt_ldap_base_dn="ou=Domain Users,dc=blahblah,dc=blahblah,dc=blahblah"
         alt_ldap_user_name="ldap_user_name_goes_here"
         alt_ldap_password="ldap_password_goes_here"
    -->
 
   <!-- GNomEx Realm for authenticating user (No LDAP)  
   <Realm className="hci.gnomex.security.tomcat.GNomExRealm"
         datasource_lookup_name="java:comp/env/jdbc/GNOMEX_GUEST" debug="99"
    /> 
   -->
   
    <!--
      To use p6spy use following class name
      driverClassName="com.p6spy.engine.spy.P6SpyDriver"
      instead of
      driverClassName="com.microsoft.sqlserver.jdbc.SQLServerDriver"
    -->
    <Resource name="jdbc/GNOMEX"
            auth="Container"
            driverClassName="com.microsoft.sqlserver.jdbc.SQLServerDriver"
            maxActive="100"
            maxIdle="30"
            maxWait="10000"
            username="SysGNomEx"
            password="${hci.gnomex.password}"
            type="javax.sql.DataSource"
            factory="hci.gnomex.security.tomcat.EncryptedDataSourceFactory"
            url="jdbc:sqlserver://hci-dbdev-08:1433;databaseName=GNomEx;SelectMethod=cursor" />

    <Resource name="jdbc/GNOMEX_GUEST"
            auth="Container"
            driverClassName="com.microsoft.sqlserver.jdbc.SQLServerDriver"
            maxActive="100"
            maxIdle="30"
            maxWait="10000"
            username="GuestGNomEx"
            password="${hci.gnomexguest.password}"
            type="javax.sql.DataSource"
            factory="hci.gnomex.security.tomcat.EncryptedDataSourceFactory"
            url="jdbc:sqlserver://hci-dbdev-08:1433;databaseName=GNomEx;SelectMethod=cursor" />

    <Resource name="jdbc/BST"
            auth="Container"
            driverClassName="com.microsoft.sqlserver.jdbc.SQLServerDriver"
            maxActive="100"
            maxIdle="30"
            maxWait="10000"
            username="SysBST"
            password="${hci.bst.password}"
            type="javax.sql.DataSource"
            factory="hci.gnomex.security.tomcat.EncryptedDataSourceFactory"
            url="jdbc:sqlserver://hci-dbdev-08:1433;databaseName=BST;SelectMethod=cursor" />
    
</Context>

