GNomEx Release Notes

5.0.8
---------------------
- Compile with flex 3.5, provide instructions for building with flash builder 4
- Handle case where experiment, analysis, flowcell directory properties don't end with file separator
- Account for Windows 7 // in File.getCanonicalPath()
- Account for case differences in experiment directory and file name
- Make dictionary editor work with flex sdk 3.5 compile (setData has to occur after component added)
- Clean up home page 
- Fix QuBit PicoGreen billing
- Add QC experiment sample type, sample names to searchable index 
- Double-click on Analysis search results brings up Analysis detail.
- Make search a popup window rather than a full pane.


5.0.7.1 (Dec 7, 2010)
---------------------
- Make 'Add Services' window dictionary-driven from experiment category
- Omit external experiments from list of experiments listed for 'Add Services'

5.0.7 (Dec 6, 2010)
---------------------
- Make experiment category on Submit Request window dictionary driven
- Add field icon, type to RequestCategory dictionary
- Centralize code for getting tree icons
- Fix Add Analysis bug introduced in 5.0.6
- Validate CC Numbers against BST

5.0.6 (Nov 30,2010)
----------------------
- Use explicit XML list to drive deletes of analysis file
- Show final sample conc. pM on Experiment Detail sample seq runs tab
- Make initialization http service requests synchronous to observe if Windows 7/Flash player launch problem persists

5.0.5 (Nov 29,2010)
---------------------
- Rename Sequence Lane to Sample Sequence Run in UI
- Fix samples grid in Edit Experiment window to always show flat view, allowing user to edit multiplex group number
- Don't highlight missing required fields on Edit window
- Fix Analysis Edit files tab so that unregistered files show and can be saved with comment
- Fix bug that was preventing samples from being organized by multiplex group number for custom barcoded samples (lab prepping own samples)

5.0.4.1 (Nov 24, 2010)
--------------------
- Fix sort order of lanes in multiplex lane
- Fix sort order of samples (when multiple group number no sequential with sample numbers)
- Fixed bug so that correct qty calculated for sequencing billing item (number of lanes).
- Fixed printable request form for non-multiplexed lanes
- Fixed bug causing error when bringing up Labeling work list
- Adjust screen layout for Cluster gen work list for more sensible use of horizontal.

5.0.4 (Nov 23, 2010)
--------------------
- Make GNomEx sample linkage to BST property driven. (Won't show up for non-HCI installs.)
- Allow user to arrange multiplex groups of samples for Illumina experiments.  
- Allow user to specify custom barcode sequence when lab preps own library
- Fix bug that was causing error on 'New Project' when app user not selected from dropdown on new requests.
- Fixed auto-email to work with SMTP servers that require authentication (e.g. gmail smtp server).
- Fixed bug that was causing idAppUser to be blank on Submit Request when admin switched between Submit Request and another main link (like Workflow or Experiments)

5.0.3 (Nov 1, 2010)
---------------------
- Fix bug that was causing 'Next' button to be disabled when switching to another main link during 'Submit Request'.  GNomEx was forced to reselect app user from dropdown to continue.
- Get rid of horizontal separator when dragging uploaded files to folders for external experiments. Expand tree node of folder after upload file drop operation.
- Fix bug so that external price charged when price dragged onto experiment billing for lab marked as 'External pricing'.
- Get rid of suffix " - sequencing reads" on Illumina download folders.
- Fix bug that was showing internal prices for estimated charges on Submit Request for lab with external pricing.

5.0.2.1 (Oct 28, 2010)
---------------------
- Fix bug that was causing Sample prep method to revert back to default on Illumina requests

5.0.2 (Oct 27, 2010)
--------------------
- Allow user to enter alternate text to describe nucleic acid extraction method when dropdown options don't describe method.
- Fix bug that was causing subsequent text searches (on Nav bar) to not be performed.


5.0.1 (Oct 26, 2010)
---------------------
- Categorize sequence tag schemes (oligo barcode scheme) by Illumina platform (request category)
- Add sortOrder to sequence tags (oligo barcode)

5.0.0 (Oct 25, 2010)
----------------------
- Allow external experiments to be submitted to GNomEx.  
- Provide window to upload and organize files for external experiments.
- Introduced property which determines if default submission is internal or external experiment submision.
- Reworked home page.
- Performance improvements to toXMLDocument in commands called during initialization (Robb).
- Prevent null pointer exception on GetRequest when billing item has null total price.
- Fix bug that was causing Prep instructions column to show up on printable form even though they are blank


4.9.9.1 
----------------------
- Added total dollar amount to billing account.
- User is prevented from submitting experiment request if total charges on billing account (including estimated charges for new request) exceed billing account's total dollar amount.

4.9.9 (Oct 10, 2010)
-----------------------
- Show estimated charges on Submit Request confirm tab.

4.9.8.1 (Oct 6, 2010)
-----------------------
- Fix bug that was ignoring HiSeq illumina request folders for downloads.

4.9.8 (Oct 6, 2010)
-----------------------
- Allow Illumina experiments to be converted from GAIIx -> HiSeq and vice versa.
- Fixed bug so that custom vs catalog slide radio button is correctly set when editing a microarray experiment
- Only allow gnomex admins to change billing account on Edit screen.  GNomEx will automatically reassign billing account on pending or completed billing items.
- Email core facility billing addresses (property-driven) when work authorization is submitted

4.9.7.1 (Oct 3, 2010)
-----------------------
- Fix bugs in 'Views' link that was caused by leftover values in idRequest
- Allow folder name to be saved on Illumina worklist.

4.9.7 (Oct 1, 2010)
------------------------
- Rework experiment download into a expanded file view.
- Provide alternate browser-based downloads to support individual file downloads > 4GB.
- Provide 'view' links in Experiments download page.
- Fixed bug that was causing Seq lanes to go to GAII cluster gen worklist rather than HiSeq worklist when 'Add Services to existing request' submitted (QC->HiSeq corePrep=N)
- Refactored DictionaryManager, separating out PropertyManager class.

4.9.6.1 (Sep 23, 2010)
------------------------
- Fix bug that was causing actionscript error when double-clicking on experiments grid (due to refactoring of ExperimentDetailView).
- Fix bug that was causing 'Please specify at least 1 additional search criteria' on old experiments that do not end with 'R'.
- Provide way to close 'new/edit Analysis Protocol' window (from Analysis Edit).

4.9.6 (Sep 23, 2010)
------------------------
- Support uploading and downloading on GnomEx configured as http rather than https
- Introduced cc number to Sample (hidden for now).  (Robb)
- Fix bug that was causing actionscript error when editing Illumina request's sequence lane.


4.9.5.1 (Sep 14, 2010)
------------------------
- Fixed bug that was looking at wrong file path for downloading Illumina requests (should have ignored revision on request)
- Fixed bug that was causing zip entry to show revision number for flow cell reports
- Show correct 1-color agilent icon in downloads browse view

4.9.5 (Sep 13, 2010)
------------------------
- Fix bug that was causing save error when submitting request on last day of month due to date boundary logic problem when getting current billing period.
- Provide visibility to lock down experiment to owner and owner's lab manager(s)
- Add 'collaborators' list to individual experiments and analysis.  These users are granted read access on the individual experiment/analysis regardless of visibility.
- Add 'close' button on experiment detail window that pops up when user clicks on experiment tree on Analysis Edit window.
- Only send email notifying of work authorization approval to submitter and PI (lab emails), not lab managers.
- When user submitting work authorization form, require either project or activity, but not both.  Expiration date is also mandatory.
- Default to show active billing accounts in 'Reassign billing accounts' popup window in billing. (Checkbox allows inactive billing accounts to be showns as well).
- Rework 'Split billing accounts' window to use dropdowns for lab and billing account rather than editable grid, which had a bug 
  that resulted in billing accounts not being properly refreshed based on selected lab.  Also, show active billing accounts by
  default with ability to also show inactive accounts.
- Get rid of horizontal scroll bars in 'folder' cell of Experiment downloads.
- Disable double-click on Experiments tree so that second click event doesn't interfere with 'Download' click event already in progress.  
  (This was causing view to switch back to Experiment detail view after 'Downloads' link was pressed.)
- Provide download checkboxes and button on 'Files' tab of Analysis detail for more intuitive navigation to downloading analysis files.
- Maintain selection of experiment/analysis tree when 'downloads' link pressed on individual experiment or analysis.  Accomplished this by filtering download list by id of request selected.
- Fix bug that was causing I/O error when guest attempted to download experiment or analysis files (caused by null pointer exception request.getUserPrincipal())
- Fix bug on 'Add Analysis' window that was not filtering analysis group by lab selected in dropdown. 
- Add security filter so that users listed as collaborators on other lab's experiments or analysis don't see empty project or analysis group folders belonging to labs they are not members or managers of.
- For printable request form, if prep instructions for all of the samples are the same, print at top of samples list rather than as column.
- Prompt user before removing price category. (Robb)
- Added code to address Mac mouse wheel problem (this may not work. We’ll need to have David try it and I’ll remove it if it doesn’t help). (Robb)
- Adjusted field widths on Price Category grid. (Robb)
- Added code to automatically add “R” on back end of nothing found in searching for experiment. (Robb)
- Use JAVA_HOME environment variable when setting path in batch program index_gnomex.cmd.
- Fix bug causing blank Analysis to show up when Analysis lookup, followed by Experiments, followed by another Analysis lookup (caused by re-selection bug).



4.9.4 (Aug 31, 2010)
------------------------
- Allow gnomex admins to send broadcast email to all active gnomex users.

4.9.3 (Aug 26,2010)
------------------------
- Fix icons for hiSeq experiments on Download grid
- Insulate calls that directly reference property constants for 
  experiment_directory, analysis_directory and flowcell_directory so that
  downloads will parse main folder correctly from each server's property
  for the filepaths

4.9.2 (Aug 25, 2010)
------------------------
- Fix wording for core lib prep instructions label on Illumina Submit request (barcoded samples)
- Filter flow cells by time period (last week, month, year, etc.) and provide lookup of flow cell by flow cell # or experiment #
- Make work list window layout consistent.
- Centralize code that parses request number into base request number
- Support different experiment, analysis, and flowcell directory properties based on the server name

4.9.1 (Aug 24, 2010)
------------------------
- When gnomex user is submitting a work auth form, show only labs he belong to in dropdown. 
- Provide way to launch gnomex to automatically bring up Work Auth window. 
- For advanced search, show only slides (in dropdown) that are used for public experiments when user is guest or univ-only user
- Fix bug that was causing error on save after adding new Billing account to a lab.
- Add info under 'Trouble downloading' to recommend users download files individually when over 2 GB.  Also, in prompt recommend indiv. file download when exceed 2 GB.
- Allow more than one production server in property production_server when gnomex runs on more than one production server at the same time 


4.9 (Aug 23, 2010)
------------------------
- Added ability for univ users (with or without GNomEx account) to submit work authorization forms in gnomex
- Added ability for admins to approve pending billing accounts (from work auth forms)
- Fix bug that was causing delete request to fail because of fk violation to seq lib treatments.
- Fix bug introduced in 4.8.7 that was causing empty work list for sequencing run and sequencing data pipeline.
- Scrub out slide product, slide design list for guest users and non-gnomex university users
- Scrub out all custom slides not belonging to user's lab
- Don't show 'no slides' message before user has selected microarray app radio button on Microarray Submit Request window.
- Show 'changes have not been saved' message when admin clicks on 'Approved' checkbox for pending billing account of Lab.

4.8.7.1 (Aug 17, 2010)
-------------------------
- Fixed bug introduced in 4.8.7 that was causing billing account dropdown to be blank on Submit Request window for non-admin users.
- Fixed bug introduced in 4.8.7 that was not allowing new billing accounts to be added to a lab.
- Fixed bug introduced in 4.8.7 that was causing Experiment Edit window to not refresh on subsequent experiments after first experiment.
- Rework timing of getting slide product list and slide design list on SubmitWindow so that it only occurs when user selects a microarray request kind.
- Don't show drag-n-drop hint on Experiments and Analysis windows for guest users.
- Multi-group selection window to filter Analysis now allows user to click on row to select lab.
- Analysis filter 'Show public experiments' causes analysis tree to refresh automatically.
- Fix wording on 'Add Services' when no QC experiments found (incorrectly worded as 'No Illumina experiments found'

4.8.7 (Aug 16, 2010)
-------------------------
- Show links on Price sheet tab of Billing window to jump to a particular price sheet.
- Add checkbox 'Show Prices' to price sheet tab of Billing window.
- Reformat filter box in Billing window nav area.
- Fix email body for invoices to work with Gmail HTML renderer.
- Use DictionaryManager cache in DictionaryHelper rather than hibernate queries, reducing DictionaryHelper.loadDictionaries from 2 seconds to < millisecond.
- Improved app startup performance by waiting to run queries to get slides and app user list until needed.  Also, improved performace of lab list by lazing loading billing accounts. (reduced startup on test server from 18 to 7 seconds)
- Fixed bug that was causing vendor, lab, billing class, etc. dropdowns to clear out after switching from Slides to some other window.
- Don't show account number or submission instructions on printable request form when guest is logged into GNomEx.
- On home page, rename 'Show My Experiments' to 'Show Experiments' when guest is logged into GNomEx.  


4.8.6 (Aug 9, 2010)
-------------------------
- Show billing items for other periods in Billing window (when clicking on request from tree)
- Moved 'internal pricing' and 'external pricing' radio buttons to Billing Account tab on Group detail window.
- When looking up experiment by request number, find experiment regardless of revision number (proceeding 'R' in experiment number).
- Show price criteria on Pricing tab of Billing window.
- Put refresh button as last link button on right of top nav panel for billing, experiments for consistent UI layout

4.8.5 patch (July 29, 2010)
-------------------------
- Fixed bug on Illumina submit request that was causing 'Samples' tab to be non-functional when 'Prepped by Core' = 'N'.  Bug introduced with prep instructions.
- Enabled barcoding for Illumina requests where the seq lib is prepped by lab (rather than core)

4.8.5 (July 28, 2010)
-------------------------
- Introduced new Billing Lab Usage report.
- Don't allow Lab to be changed on Analysis edit window.  (Should use drag-n-drop instead)
- Reformat Analysis edit window to leave more room for description.  Moved analysis group to its own tab.
- Move filter widgets and refresh link to top panel in Analysis view.  
- Add ability to filter by multiple labs in Analysis view and ability to filter by analysis created in last week, month, 3 months, or year.
- Add core prep instructions to Submit Illumina Request window.  Show instructions on printable form.
- Fix save bug on Microarray edit screen by refreshing list that populates application radio buttons based on request category.
- Increase width of printable request form from 600 to 700 pixels.


4.8.4 (July 25, 2010)
-------------------------
- Fix email body to work with Outlook 2007 and Gmail HTML renderers.
- Only warn about missing chartfields or blanking out chartfields on PO accounts for billing accounts just updated or added.

4.8.3 (July 21, 2010)
-------------------------
- Fixed bug where reselect on deactivated price caused blacked-out line. (Robb)
- Made change so cursor stays on “complete” after request has been moved from “complete” to “approved.” (Robb)
- Changed External Billing checkbox to Internal/External Pricing radio buttons. (Robb)
- Added PO checkbox to BillingAccounts items and blank out chartfields when checked.  
- Use PO flag on billing account to determine if billing shows under 'External PO' folder rather than using 'External' flag on Lab. (Robb)
- Warn when price, qty, or unit price is blank or 0;


4.8.2 (patch July 9, 2010)
-------------------------
- Fixed protocols links on experiments detail.  Bug was causing last protocol to always be shown.

4.8.2 (July 7, 2010)
-----------------------
- Fixed printable request form for Illumina HiSeq to show barcode (also other code that should test for both GAIIX and HiSeq like sample quality billing plug-in)
- Fixed billing summary report by lab to include HiSeq in Solexa totals.
- Work around unreachable orion dtd in datasources.xml by using dummy entity resolver in lucene BuildIndex java app
- Change Illumina Lib QC plug-in to only create billing item if lab prepped own library (seqPrepByCore=N)
- Bypass creating sample quality billing items and lib prep billing items on Illumina requests where the lab prepped its own library.

4.8.1 (Jul 6, 2010)
-----------------------
- Replaced seq lib treatments with request categories
- Order sequencing application radio buttons
- Added fk constraint on Request to Request Category


4.8 (Patch Jul 2, 2010)
------------------------
- Fixed bug that was causing actionscript error deep in renderer code.  Only happened when clicking on microarray experiment.  Fixed by adding hybs grid in MicroarrayState.

4.8 (July 1, 2010)
------------------------
-	Introduced Illumina HiSeq 2000 request category
-	Introduced new tab in Worfklow for Illumina HiSeq
-	Filter number sequencing cycles by request category (GAIIx vs HiSeq 2000)
-	Order radio buttons (ascending sort) for number seq cycles 
-	Order radio buttons for single vs. paired ends
-	Add notes to number sequencing cycles
-	Allow more than 1 sequencing lane per sample on Illumina new requests
-	Added PhiX error rate to Flow Cell Channel
-	Fixed bug in billing plug-in for Illumina sequencing that matched to incorrect price criteria
-	Add total PO debit and credit rows to Billing GL Interface and change journal entry name to 'MICROARRAY'
-	Billing 'approved' link now jumps to 'Approved (external)' rather than 'Approved'.
-	On experiments page, don't include request category and application in sort.  Sort be request number (descending) instead.
-	Disable request categories on submit request window, add services window if request category is inactive



4.7 patch (June 22, 2010)
------------------------
- Fix bug that was causing null reference on lab combo when non-admin user submitting a request
- Fixed bug that was causing # of additional sequencing lanes on 'add services' to be non-editable for non-admin users
- Don't require sample prep method to be filled in when adding lanes since old requests won't have this filled in
- Fix null ref in sample setup for onGetLab parentDocument.filteredProjectList.refresh()

4.7 (June 20, 2010)
-------------------------
- Ability to add services to an experiment request (amend request)
- Add filter in last 3 months experiment filter
- Include application in  experiment tree label for advanced search, amend request  
- Dictionary editor - maintain selection when dictionary entry added, edited, removed
- Maintain the last selection on billing period combo on Billing screen
- Fixed some compile warnings related to parameterized collections.
- Add lastModifyDate to request (experiment)
- Billing items are now created automatically when new request is submitted or services are added to an existing request.
- Drag-n-drop analysis to analysis group(s).
- Make printable experiment form more print-friendly.
- Add revision number to end of request number when services are added (example 7425R -> 7425R1 -> 7425R2).
- Delete billing items associated with request when request is deleted (warn first).
- Fix bug that was causing non-existent experiment lookup to interfere with subsequence experiment browses
- Add ability to add, delete samples on edit request window
- Document sample, hyb, or seq lane number to correspond to qty (not stored in db yet, waiting for future release to free up notes field.)
- Handle added lanes, hybs, samples in billing plug-ins.
- Just warn if samples on experiment not used on hybs or seq lanes.
- Show warning about adjusting billing when services deleted on edit window.
- Add ability to link other lab's experiments to analysis.
- Ignore inactive price categories when creating billing items 
- Require lab to be selected for admins on Experiment browse if broad criteria or no other criteria provided.
- Altered Lib conc. to support 1 decimal (Illumina workflow Lib Prep)
- Generalize work auth links using properties workauth1_url, workauth1_name, workauth2_url, workauth2_name
- Default printing of request form does not include instructions.  Additional link provided for 'Print all' so that instructions can be printed with request form.
- Price sheet drag-n-drop only works for price categories, so warn user if attempted on prices or price sheets. Also, provide informative message when price category attached to another price sheet or repositioned.
- Add drag-and-drop hint link to Analysis, Experiments, and Billing Price Sheet

4.6.6 (May 13, 2010)
-------------------------
- Organize sequencing applications by theme
- Add sample lib prep conditions/treatments 
- Fix bug that was causing request category name, application name to double, triple
- Fix bug that was causing required border (yellow) to appear around microarray dropdown on microarray edit screen
- Fix typo in instruction box on microarray edit screen, hyb setup tab
- Add 'On Hold', 'In Progress' status to work item; persist status on work item 
- Get rid of Flow Cell Stock work list
- Show status on Illumina cluster gen work list


4.6.5 (Apr 28, 2010)
------------------------
- Format email to verify lab's user accounts with HTML instead of plain text.
- Add isActive to lab.  Show (inactive) verbiage in list of users.
- Fix refresh after save of user and group.
- Fix Type #1090 error caused due to mis-timed event-handling when looking up by experiment or analysis
- Fix scoping when looking up analysis or experiment not in user's lab.
- Show different states on home view for admin, non-submitting user (no lab assigned) or guest.
- Show padding for download button on analysis detail.


4.6.4 (Apr 25, 2010)
------------------------
 - Auto-email group contact to verify active user accounts.
 

4.6.2 (Apr 12, 2010)
-------------------------
- Fix cy3 and cy5 radio buttons so that renderer works with scrolling.  Switched to using checkboxes.
- Fixed problem with seq app and microarray app radio button repeaters that were not refreshing after first submit request.
- Fixed load properties in gnomex security manager to only occur in init.  Used entitity resolver so that if orion site is down, datasources.xml will still be parsed.
- Patch (Apr 13, 2010)
  - Fix problem where qc submit request was showing seq app radio buttons
  - moved seq app radio buttons to its own tab
- Patch (Apr 14, 2010)
  - Fix download list for illumina requests so that multiple GAII folders (with dashes) an appear
  - Seq app radio button on sep tab now.
 

4.6.1 (Mar 30, 2010)
-------------------------
- Fixed bug that was preventing price criteria from being deleted.  Also fixed bug that was preventing multiple criteria from being saved in one shot.
- Fixed bug that was preventing lanes from being added or copied when template had analysis instructions with a single quote.


4.6.3 (Mar 29, 2010)
-------------------------
- New radio group renderer for cy3 and cy5 labels on samples tab to fix bug that shows up when more than one page worth of samples.
- Fix Illumina seq prep by core = n invalid ref problem
- Fix filter problem on slide dropdown when new slide added
 

4.5.3.1 (Mar 15, 2010)
-------------------------
- Fixed analysis upload servlet bug
- Introduced plupload widget for HTML uploader.
- Select user after adding new one.
- Patches
  - Fix Illumina lib prep (radio not selected) causing null ref on # seq cycles radio group. (patched swf Mar 17,2010)


4.5.3  (Mar 12, 2010)
-------------------------
- New HTML uploader to workaround +1 GB Flex upload problem encountered.


