﻿GNomEx Release Notes
---------------------

5.6
---------------------
* Display the first and last name of the User whose UNID is trying to be used by an admin creating a new account(tcourdy)
* Changed b2b link from "New Experiment Order" to "Post Experiment Data"(tcourdy)
* New raw data window for chromatograms (mbowler)
* Updates to chromatogram detail view (mbowler)
* Improvements to parsing abi file data (mbowler)
* Added core facility description to core facility dropdown on submit workauth window (mbowler)
* Changed the sample name field in the plt file to contain only the sample name and idPlateWell to simplified chromatogram file names (mbowler)
* Removed the action dropdown and the go and delete buttons from the chromatogram review screen when on experiment detail (mbowler)
* Changed data track filtering upon linking from an analysis so that the correct DT is selected, but the others are not filtered out (SF Bug #236) (mbowler)
* Added isLatestBuild checkbox to genome build grid in configure organisms (mbowler)
* Added institution combo box to the ExperimentVisibility view.(tcourdy)
* Fixed issue with idInstitution being set to null and thus causing the experiment to not be viewed by anyone.(tcourdy)
* Fixed bug that was causing the slide product list on the experiment setup view to not refresh properly after creating a new slide(B2B reported bug)(tcourdy)
* Prevent duplicate chromatogram objects from being saved in db in SaveChromatogramFromFile.  (tdisera)
* Verify users email link show the current user's email address as from address and current user name (and their managing core facilities if any) in email body (mbowler)
* Allow for site-specific logo on login page and gnomex main nav bar area. (tdisera)
* Changes to columns in chromatBrowseView for better viewing.  (mbowler)
* Show only the last 5 digits in the idPlateWell on chromatogram grid and on plate report. (mbowler)
* Show submitter email and phone number on experiment detail info tab. Only included in layout if there is info to display. Non visible otherwise.(tcourdy)
* Fixed bug that was showing duplicate Agilient Microarray sheets in billing pricing view.(tcourdy)
* When a user requests a new gnomex account, send a notification email to the primary contact for the lab the user requested to be a part of as well as any managers for the lab.(tcourdy)
* Added expand/collapse labs button to billing request tree (mbowler)

deploy notes
----------------------
--New Property
insert into PropertyDictionary (propertyName, propertyValue, propertyDescription, forServerOnly, idCoreFacility)
Values ('id_default_institution', '1', 'ID indicating default institution for visibility of experiments', 'N', null);

5.5 (Oct 24, 2012)
---------------------
* Fixed issue with scrollbars showing up on annotations selection list. (rcundick)
* Fixed issue with multiselect combo control for annotations showing unnecessary scrollbars, not allowing multiple selections. (rcundick)
* Fixed slow initialization of topics window. (rcundick)
* Fixed bug in order review screen that disallowed deleting submitted orders. (mbowler)
* Made experiment name and description required for external experiments. (rcundick)
* Fixed problem where collaborator and manager lists didn't update upon activating a user. (mbowler)
* Fixed a problem where tax id and sort order were not saving for organisms. (mbowler)
* Added "applies to" filters for configure annotations window.  Fixed bug where deselecting all filters caused an empty list.  Added refresh button.(tcourdy)
* Fixed a bug where deleting a billing account didn't update the displayed accounts until after save. (mbowler)
* Fixed problem with update of Analysis Protocol dropdown after new protocol added. (rcundick)
* Added container type to order review page. (mbowler)
* Removed plate, quadrant, well, and run columns from experimentDetailView Chromatogram tab.(tcourdy)
* Fixed alignment issues with the work authorization email text.(tcourdy)
* Added description and acceptOnlineWorkAuth to CoreFacility (mbowler) 
* Added core facility description to new user sign up (mbowler)
* Restrict core facilities shown on work auth window combo box to those that allow online work auth submission (mbowler)
* Changed delete annotation functionality to offer option to delete associated values rather than limiting to inactivate if there are values. (rcundick)
* Changes and code cleanup to chromatogram save and parsing controllers to fix email bug (mbowler) 
* Small changes to plate and redo reports and chromatogram browse view per Anna request (mbowler)
* Fixed error when adding billing items to split invoice. (rcundick)
* Lined up and added a little style to the contact info section of the "About" screen.(tcourdy)
* Reformatted request account window, fixed situation where duplicate requests can be submitted. (rcundick)
* Fixed problem with number entry on DataPipeline Q30 field. (rcundick)
* Fixed issue with uploading samplesheets to URL annotation columns. (rcundick)
* Sample name is cropped on plate report to prevent wrapped names. (mbowler)
* Fixed plates, runs, orders, and chromats grids so that clicking a row doesn't check that item and shift+click works only when clicking in checkboxes. (mbowler)
* Changed Topics permissions such that a user who doesn't belong to a lab is treated same as guest user. (rcundick)
* Fixed null pointer error when loading organism XML. (rcundick)
* Changed Analysis drag/drop to allow dropping on folders as opposed to having to drop within the folder. (rcundick)
* Added check to disallow duplicate annotation names. (rcundick)
* Added check to disallow duplicate instrument run and plate names. (mbowler)
* Fix bug where annotation description box would not allow more than 100 characters. (SF Bug #233) (mbowler)
* Improvements to the chromatogram parser to speed up checking requests and updating their statuses. (mbowler)
* Redesigned database relationships between Annotations and the PlatformApplication table, altered hibernate definitions and actionscript code to accommodate the new design. (rcundick)
* Fixed the refresh on billing accounts upon selecting a lab on nav, split, and reassign billing views. (mbowler)
* Filter out billing accounts that are not associated with the core(s) the user manages on nav, split, and reassign billing views. (mbowler)
* Added printable form link for DNA Seq Core Experiments (on experiment detail, experiment edit views). (mbowler)
* When owner missing on save Topic, automatically switch to Info tab so they know where to enter owner. (rcundick)
* Added rename/deletion of files functionality to the analysis view.(tcourdy)
* Added editable from email address on email all gnomex users form. (mbowler)
* Renamed StringUtil.as to GNomExStringUtil.as to avoid confusion/conflicts with mx.utils.StringUtil. (rcundick)
* Fixed bugs in analysis annotations and made it so that annotations with no data don't show in view mode. (rcundick)
* Fixed bug where users in multiple labs or in labs associated with multiple cores would get duplicate emails from email all users link. (mbowler)
* Fixed screen update issue when annotation automatically set to inactive when delete is tried but aborted. (rcundick)
* Don't allow topics drag/drop for guest users or users that don't belong to a lab. (rcundick)
* Fixed problem where a billing account with authorized users assigned to it could not be deleted. (mbowler)
* Removing a member of a lab also removes any ties they have to any billing accounts for that lab. (mbowler) 
* Fixed failure to set analysis type dropdown to current selection and unwanted scrollbar display problems on analysis protocol window. (rcundick)
* Fixed bug causing exception when annotation multi-combo created with no define options. (rcundick)
* Took a new approach to solving application protocol update bug by using a dedicated service rather than the dictionary manager. (rcundick)
* Set default dropdown selection for analysis protocol after disposing of edit protocol window in analysis edit to blank item. (rcundick)
* Set maximum text length for annotation description to 2000 characters. (rcundick)
* Fixed the link to email for reporting software bugs on the About view. (mbowler)
* Add property so that site can include site specific logo or title next to gnomex logo and app title in nav bar (tdisera)

deploy notes
----------------------
-- New properties for core facility
alter table gnomex.CoreFacility add acceptOnlineWorkAuth char(1) NOT NULL Default 'Y';
alter table gnomex.CoreFacility add description varchar(10000) NULL;

-- Alter Platform/Application table design for Annotations ** Note that the following two commands should be run separately.
-- They will fail if run concurrently:

-- Delete extraneous entries in PlatformApplication caused by incorrect db design.
delete from PlatformApplication
where idPlatformApplication not in (select idPlatformApplication from PropertyPlatformApplication)
and idProperty > -1

-- Drop PropertyPlatformApplication table (rendered unnecessary by new design)
drop table PropertyPlatformApplication



5.4.9.2 (Oct 16, 2012)
---------------------
* Fixed Data Tracks 'show links' bug that was causing duplicated file name (tdisera)
* Fixed Data Tracks IGV link bug that was preventing correct generating of .bw/.bb file (tdisera) 


5.4.9.1 (Oct 1, 2012)
----------------------
* Show container column on Order Review (mbowler, tdisera)
* Don't allow inactive user to submit requests (tdisera)
* Don't error on login when user doesn't have any labs (mbowler)
* Fix bug so that billing account remove button works (mbowler)

5.4.9 (Sept 27, 2012)
---------------------
* Fixed bug in ProjectRequestFilter SQL causing unexpected results when viewing experiments for logged-in user. (rcundick)
* Changed new user sign up.  Users must now select a core facility and only that core facility is contacted. (mbowler)
* Fixed bug in new user screen where the lab name field wasn't allowing delete or backspace, tabbing to next field, or moving the cursor left or right. (mbowler)
* Can now have different request number sequences for each core facility. (bspiglejr)
* Progress tab in experiments view now works for DNA Sequencing experiments.  (bspiglejr)
* Cap Seq Plate type orders now require either 1 or 4 plates (2 and 3 not allowed).  (bspiglejr)
* If Cap Seq order has with 4 plates then 1st 3 plates must have 80 or more wells specified.  (bspiglejr)
* Fixed collaborator list display on experiment and analysis visibility tab for regular users. (rcundick)
* Added filtering by core facility to billing accounts in users/groups view. (mbowler)
* Added ability to filter by core facility or view all labs in groups tab. (mbowler) 
* Added ability for core admins to select/deselect their core from labs on groups tab. (mbowler)
* Slight style change, and added close button to the chromatogram detail screen (when it is a popup). (mbowler)
* Added core facility dropdown box to work auth grid.  Emails are now sent only to the core facility that the billing account is for. (mbowler)
* Added filter combo box for labs on work auth window. (mbowler)
* Fix bug introduced when visibility tab added to cap seq edit states.  (Removed visibility tab from frag analysis new experiment order). (tdisera)
* Fixed bug that was causing blank samples in samples grid when user submitted cap seq (1) plate order (tdisera)
* Decrease font for pending samples tree on Fill Plate view (tdisera)
* Fixed bug that was causing wrong price for 4 96-well plate cap seq order.  Also, deferred creating billing items for cap seq orders to when order is submitted (tdisera)
* Fix bug that was causing back button to show up when double-clicking on experiment from experiments grid on Experiments view. (tdisera)
* Sample names for DNA Sequencing experiments now only allow alphanumeric, hyphen and underscore characters.  (bspiglejr)
* Allow DNA Seq users to edit non-sample data after request has been submitted.  (bspiglejr)
* Disabled analysis annotation controls for view mode. (rcundick)
* Added yellow background for required analysis and data track annotations that have not been entered. (rcundick)
* Added check for required analysis and data track annotations before saving. (rcundick)
* Fix issue where admin lost the core facility they managed when they saved a new lab.  (bspiglejr)
* Create temporary directory if it does not exist when attempting to upload sample sheet. (rcundick)
* Eliminated extraneous vertical and horizontal scrollbars on cap seq samplesheet upload. (rcundick)
* Restored save button to data tracks detail view in Topics. (rcundick)
* Added a popup billing account edit screen. (mbowler)
* Allow owner to edit samples on external requests. (bspiglejr)

deploy notes 
--------------------
-- Seed the microarray request number table correctly
declare @identity int
select @identity= (Coalesce(MAX(idRequest),0)) from Request
set @identity = @identity + 1
DBCC CHECKIDENT('MicroArrayRequestNumber', RESEED, @identity)
-- Set qty on price for 4-plate price to 4
declare @identity int
select @identity= idPriceCategory from PriceCategory where pluginClassName = 'hci.gnomex.billing.CapSeqPlatePlugin';
update PriceCriteria 
set filter1 = 4 
from PriceCriteria pc
join Price p on p.idPrice = pc.idPrice
where p.idPriceCategory = @identity

--------------------------------------------------------------------------------
-- Update billing account core facility ids.
begin transaction
declare @idMicro int
declare @idDNA int
set @idMicro=1
set @idDNA=2
-- Update core facility for billing accounts created during import.
update BillingAccount set idCoreFacility=@idDNA 
  where idCoreFacility is null 
    and idBillingAccount in (select idBillingAccount from BillingAccount_Audit where accountName like 'Finch Bill%')
-- Update core facility for billing accounts created after import by DNA Seq personnel
update BillingAccount set idCoreFacility=@idDNA 
  where idCoreFacility is null 
    and idBillingAccount in (
      select BillingAccount.idBillingAccount
        from BillingAccount 
        join BillingAccount_Audit on BillingAccount_Audit.idBillingAccount = BillingAccount.idBillingAccount
          and BillingAccount_Audit.AuditAppuser in ('u0252268','u0243109')
        where BillingAccount.idBillingAccount in (select idBillingAccount from BillingAccount_Audit group by idBillingAccount having MIN(AuditOperatioDate) > '9/5/2012')
          and BillingAccount.idBillingAccount not in (select idBillingAccount from BillingAccount_Audit where accountName like 'Finch Bill%')
        group by BillingAccount.idBillingAccount
       )

-- Insert any that existed prior to import but now have been updated to have shortacct       
Insert into BillingAccount(accountName, accountNumber, expirationDate, idLab, accountNumberBus, accountNumberOrg, accountNumberFund, accountNumberActivity,
              accountNumberProject, accountNumberAccount, accountNumberAu, accountNumberYear, idFundingAgency, isPO, isApproved, approvedDate, 
                createDate, submitterEmail, submitterUID, shortAcct, startDate, idCoreFacility)
  select accountName, accountNumber, expirationDate, idLab, accountNumberBus, accountNumberOrg, accountNumberFund, accountNumberActivity,
              accountNumberProject, accountNumberAccount, accountNumberAu, accountNumberYear, idFundingAgency, isPO, isApproved, approvedDate, 
                createDate, submitterEmail, submitterUID, shortAcct, startDate, @idDNA
    from BillingAccount 
    where shortAcct is not null and IsNull(expirationDate, '1/1/2000') > GETDATE()
      and idBillingAccount not in (select idBillingAccount from BillingAccount_Audit where accountName like 'Finch Bill%')
      and idCoreFacility is null

-- Assume any remaining are for microarray.
update BillingAccount set idCoreFacility=@idMicro where idCoreFacility is null

select idCoreFacility, COUNT(*) from BillingAccount group by idCoreFacility
select idCoreFacility, COUNT(*) from BillingAccount where idBillingAccount not in (select idBillingAccount from BillingAccount_Audit where accountName like 'Finch Bill%') group by idCoreFacility
rollback transaction
-------------------------------------------------------------------------------------------------


5.4.8 (Sept 19, 2012)
---------------------
* Allow decimal points in Reads PF for flow cell channel (bspiglejr)
* Add experiment_view_limit property to control the maximum number of experiments shown in experiment view.  Default is 1000.  (bspiglejr)
* Add experiment_default_view property to control which view non-admin users see when opening experiment view.  Values are "my experiments", "my lab" or "all".  "my experiments is default.  (bspiglejr)
* Changes to plt file creation to ensure no duplicate chromatogram file names and fixed assay/primer label. (mbowler)
* Fixed a bug where sometimes a plate would load as the wrong experiment type fom the plate review screen. (mbowler)
* Fixed a bug where upon saving a plate, it wasn't correctly colored by assay or primer for FA or MS experiment types. (mbowler)
* Configure Annotations button now available in Home view for non-admin users (non DNA Seq as well).  The button is in the General section.  (bspiglejr)
* Fix issue with entering lab during new user registration on firefox..  (bspiglejr)
* Fixed bug where 96th well did not default to a control. (mbowler)
* Added 'share web link' capability on Experiment, Analysis, and Data Track detail. (rcundick)
* Implemented new Experiment, Analysis, Data Track, and Topics links that do not require detailWindow parameter (old format still works as before). (rcundick)
* Added ability to change UCSC link in user profile window. (rcundick)
* Now filter users by core facility when sending emails to "all" GNomEx users.  (bspiglejr)
* Fixed plt file creation to remove spaces and commas.  (mbowler)
* Runs will be deleted if all the plates have been removed from it.  (mbowler)
* Updated security advisor to allow admins to edit processing orders as long as they are not on a reaction plate.  (mbowler)
* Removed link to edit view from order name on order review screen.  (mbowler)
* Fixed a bug where the plate information was still displayed after clicking 'New Plate'.  (mbowler)
* Removed the '-1' on Plate ID when plate is new.  (mbowler)
* Allow creation of work authorizations for all authorized core facilities at request creation time.  (bspiglejr)
* Changed most of the lab and app user combo boxes to filter combo boxes. (mbowler)
* Allow organization and deletion of files on the experiment view. (tcourdy)
* Changed layout of group detail billing account view.  More important information is now up front. (tcourdy)
* Changed the file upload feature on the group detail billing account view.  It now pops up a new window to complete the task which frees up more room in the grid. (tcourdy)
* Fixed bug that wasn't showing the average insert size or capture lib design id on the confirmation tab when submitting a new experiment. (tcourdy)
* Fixed bug in Topics search. (rcundick)
* Added feature to allow restriction of annotations by annotation type. (rcundick)
* Added check to prevent use of "Sample Name" and "Organism" as annotation names. (rcundick)
* Changed build.xml to include meta tags to eliminate browser caching for gnomexFlex.jsp and gnomexGuestFlex.jsp. (rcundick)
* Reduced length of data track labels on data track navigation window. (rcundick)
* Fixed bug that was causing the property list on the analysis annotation tab to not refresh properly after the user added a new property.(tcourdy)
* Added Purchase supplies link on the welcome view that is only shown if the link is present as a property and the user is part of a dna seq core lab.(tcourdy)
* Fixed functionality problem with login as guest followed by logout and login as normal user. (rcundick)
* Fixed actionscript error when deleting lanes from experiment. (rcundick)
* Fixed bug when opening Analysis navigation window in guest state. (rcundick)
* Fixed bug in GetPendingSampleList that was incorrectly removing wells based on samples already on reaction plate.  Needed to consider assays and primers.  (tdisera)
* Fixed save error bug that occurred in Illumina Pipeline workflow when Clusters Passed Filter (M) exceeded max (9999.99).  Provide informative warning message.  (tdisera)
* Added feature to automatically prompt for billing account change when experiment dragged to different lab. (rcundick)
* Enable lab, owner, billing account dropdown for experiments owned by regular user. (rcundick)
* Fixed bug causing actionscript error when Experiment Platform editor closed. (rcundick)
* Fixed permissions problem when topic owner tries to delete topic. (rcundick))
* Added ability to filter experiment annotations by combination of request category and application. (rcundick)
* Removed markup from description in analysis grid. (rcundick)
* Implemented feature to notify user when requested account has been approved. (rcundick)
* Removed trace messages from FilterComboBox renderer. (rcundick)
* Performance enhancements to GetChromatogram. (mbowler)
* Changed Submitter to request submitter instead of user from chromatogram file on ChromatogramDetailScreen. (mbowler)
* Fixed actionscript error when deleting empty project. (rcundick)
* Fixed ConcurrentModificationException when looking up experiments by group. (rcundick)
* Removed italics and list tags from description display column for annotations. (rcundick)
* Fixed error when items with duplication platform but different application added to platform/application list in managing annotations. (rcundick) 
* Added contact information for all active core facilities on About page. (mbowler)
* Fixed sufficient criteria problem with ChromatogramFilter and plate/run names. (mbowler)
* Added check for organism restrictions to Analysis annotations display. (rcundick)
* Added code to check qualify core facility email by server before sending new user account registered email to core facility. (rcundick)
* Billing Accounts now can optionally have a core facility associated.  If one is specified then Billing Account is filtered by core facility in experiment creation.  (bspiglejr)
* Billing Accounts now can optionally have one or more users associated.  If any are specified then Billing Account is filtered by user in experiment creation.  (bspiglejr)
* Experiment setup screen has been modified so that Billing Account selection comes after user and request category selection.  (bspiglejr)
* Fixed problem with owner dropdown refresh after changing lab when editing experiment. (rcundick)
* Changed FilterComboBox to clear filter when down arrow button pressed. (rcundick)
* Corrected failure to show experiments and analyses for all labs in topics link view. (rcundick)
* Fixed alignment of save/close buttons on Alignment Profile window. (rcundick)
* Added blank selection option to Annotations window when Single Selection option selected. (rcundick)
* Resized Annotation Configuration window so that save button is not obscured on smaller monitors. (rcundick)
* Fixed problem with experiment upload feature not working correctly after an external experiment is registered. (rcundick)
* Fixed bug preventing candidate experiments from showing up on Add Services option. (rcundick)
* Added distinct to lab dropdown query to prevent duplicate labs from appearing. (rcundick)
* Removed requirement for folder source/destination folder ids in MoveDataTrack.java (was preventing move between folder and parent genome build). (rcundick)

deploy notes 
--------------------
* at deploy time:  alter table FlowCellChannel alter column [read1ClustersPassedFilterM] numeric(6,2)  
*** Also change the audit table for FlowCellChannel
* May wish to run following code to get work authorizations right.
declare @idDNA int
declare @idMicro int
select @idDNA = idCoreFacility from CoreFacility where facilityName like '%DNA%'
select @idMicro = idCoreFacility from CoreFacility where facilityName like '%Micro%'
begin transaction
select * from PropertyDictionary where propertyName like '%workauth2%'
update PropertyDictionary set idCoreFacility=@idMicro where propertyName like '%workauth2%' and idCoreFacility is null
update PropertyDictionary set propertyValue='Micro Array Work Authorization (external customers)' where idCoreFacility=1 and propertyName='workAuth2_name'
insert into PropertyDictionary(propertyName, propertyValue, forServerOnly, idCoreFacility)
  values('workauth2_url', 'doc/dnaseq_core_work_authorization_form.pdf', 'N', @idDNA)
insert into PropertyDictionary(propertyName, propertyValue, forServerOnly, idCoreFacility)
  values('workauth2_name', 'DNA Sequencing Work Authorization', 'N', @idDNA)
select * from PropertyDictionary where propertyName like '%workauth2%'
rollback transaction


5.4.7  (Aug 30, 2012)
---------------------
* Require admins with abilities to manage > 1 core facility choose the core facility in the Billing view. (bspiglejr)
* When invoice (for PO billing account) sent to billing contact, also send a copy to billing admins for the core facility. (bspiglejr)
* Changed GetPlateList and GetPlate to speed up Fill Plate and Review Plates and Runs screens. (mbowler)
* Fixed a problem with 'Show all' on Plate review screen. (mbowler)
* Added divider lines to Plate Editor to make resizing the sections easier. (mbowler)  
* Fixed bugs where visibility tab not enabled on b2b, error null pointer error on displaying certain experiments. (rcundick)
* Added a redo report on the plate editor. (mbowler)
* Added shortAcct and startDate to BillingAccount. (bspiglejr)
* Add startDate to work authorization form. (bspiglejr)
* Add startDate and shortAcct to detail group view for edit. (bspiglejr)
* Implemented default visibility for topics. (rcundick)
* Insured that topic detail shows when new topic created. (rcundick) 
* Underline links on topic tabs for Exp, Analysis, Data Tracks and enable single click hyperlink. (rcundick)
* First plate is displayed when loading a run. (mbowler)
* Fixes for several intermittent problems with loading runs with removed plates. (mbowler)
* Fixed Finch TV icon renderering problems. (mbowler)
* Add Invoice entity and allow updating of the invoice number in billing. (bspiglejr)
* Fixed description tab enable bug. (rcundick)
* Fixed Topic url construction bug. (rcundick)
* Fixed bug where owner changed when services added to request. (rcundick)
* Fix bug where GetBillingItemList aborted when a request has billing items in other billing periods (bspiglejr) 
* Set last email date on invoice when invoice is emailed.  (bspiglejr)
* Allow search by invoice number on billing screen.  (bspiglejr)
* Allow users to update email address before billing invoice email is sent.  (bspiglejr)
* Show invoice number on invoice.  (bspiglejr)
* Show invoice number on month end report.  (bspiglejr)
* Filter billing reports by core facility for super admins.  (bspiglejr)
* Fix billing admin security for both core facilities.  (bspiglejr)
* Replaced topics icons. (rcundick)
* Updated Lucene indexing to include topics. (rcundick)
* Updated Lucene search results to include topics. (rcundick)
* Enabled edit mode for experiments and analysis from within Topics view. (rcundick)
* Changed Add Services request list to filter by idSubmitter rather that idAppUser. (rcundick)
* Restrict lab list on add topic to labs user is a member of for non-admin users. (rcundick)
* Allow all plates on multi-plate request (cap seq) to be partial (bspiglejr)
* Do not show billing account in experiment setup if the date is before the startDate.  (bspiglejr)
* Implemented code to not allow broader visibility of child topics. (rcundick)
* Changed initial topics tree display to only to expand to highest level of topics. (rcundick)
* Change Billing GL File to allow some specific values by core facility.  (bspiglejr)
* Change Billing Month End report title to use Core Facility name instead of "Microarray".  (bspiglejr)
* Add example sheet download link for cap seq to the samples view as well as the download page.  (bspiglejr)
* Implemented Topics icons that show visibility state. (rcundick)
* Work Auth submission emails and confirmations are now core facility specific.  (bspiglejr)
* Use no reply from on change password email if user is associated with multiple core facilities (through labs).  (bspiglejr)
* From address on verify users now uses generic address if lab associated with multiple facilities.  (bspiglejr)
* From address on public self register user now takes core facility into account.  (bspiglejr)
* Confirmation email on billing account approval now handles core facilities correctly.  (bspiglejr)
* Request confirmation email now has correct core facility name in intro.  (bspiglejr)
* Get account information for gl account from core facility specific properties.  (bspiglejr)
* Pending work authorization daemon now sends emails to appropriate core facility(s) for the billing account's lab.  (bspiglejr)
* List appropriate core facility names/contacts in footer of user verification email.  (bspiglejr)
* Send confirmation email to user for DNA Seq requests at submit time instead of save time.  (bspiglejr)
* Delete empty projects owned by user when user is deleted or removed from associated lab (member/collaborator/manager).  (bspiglejr)
* Show which wells are redos on plate editor and plate report. (mbowler)
* Don't show 'Submit' warning unless DNA Seq Core Experiment detail. (tdisera)
* Workaround tab overlap problem on Experiment Detail by not changing tab on refresh. (tdisera)
* No longer update sample prepInstructions when request corePrepInstructions are changed.  (bspiglejr)
* Fixed filter issues and datagrid differences on plate and run review screen. (mbowler)
* Updated columns and filter for chromatogram browse view. (mbowler)
* Fixed problem with long file names on chromatogram detail view. (mbowler)
* Added warning to change  owner when lab changed for experiments, analyses, and data tracks. (rcundick)
* Changed icons on Topics visibility tab to correspond to Topics instead of Data Tracks. (rcundick)
* Implemented prompt for new owner on change analysis lab. (rcundick)
* Added owner dropdown to add analysis window for admins only. (rcundick)
* When more than 1 lane is added for a sample on Add services, sequence lanes for the same sample end up in the same lane. (tdisera)
* Allow spaces in last name on New User Registration web page (rcundick)

deploy notes 
--------------------
* Run following script to create invoices after deploy (change rollback to commit)  (bspiglejr)
begin transaction
declare @identity int
select @identity= (Coalesce(MAX(idInvoice),0)) from Invoice
DBCC CHECKIDENT('Invoice', RESEED, @identity)

insert into Invoice(idCoreFacility, idBillingPeriod, idBillingAccount)
  select BillingItem.idCoreFacility, BillingItem.idBillingPeriod, BillingItem.idBillingAccount 
    from BillingItem 
    left join Invoice on Invoice.idCoreFacility=BillingItem.idCoreFacility
            and Invoice.idBillingPeriod=BillingItem.idBillingPeriod
            and Invoice.idBillingAccount=BillingItem.idBillingAccount
    where Invoice.idInvoice is null
    group by BillingItem.idCoreFacility, BillingItem.idBillingPeriod, BillingItem.idBillingAccount
update Invoice set invoiceNumber= 'I-' + CONVERT(varchar(50), idInvoice) where invoiceNumber is null
update BillingItem set idInvoice = Invoice.idInvoice
  from BillingItem
  join Invoice on Invoice.idCoreFacility = BillingItem.idCoreFacility and Invoice.idBillingPeriod = BillingItem.idBillingPeriod
    and Invoice.idBillingAccount = BillingItem.idBillingAccount
  where BillingItem.idInvoice is null
rollback transaction

5.4.6.3 (Aug 8, 2012)
---------------------
* Fixed bug On Add Services... admin was assigned as submitter when converting a QC request to another kind of request. (tdisera)
* To avoid insufficient permission error on Add Services, further refined logic for Add Services so that normal user is assigned as submitter (and owner) when converting QC request to another kinds of request. (tdisera)

5.4.6.2 (Aug 7, 2012)
---------------------
* Fixed bug in GetBillingItemList that was causing class cast exception (bspigle)
* Fixed bug in RequestParser that was causing sample annotations to not be saved (tdisera)


5.4.6.1 (Aug 5, 2012)
--------------------
* Fixed bug so that topics launch link uses correct base url (rcundick)
* Fixed bug so that owner doesn't change when Add Services (rcundick)
* Fixed bug so that description tab is enabled when submitting a request (rcundick)
* Fixed bug so that visibility tab is enabled when editing a request (rcundick)
* Fixed bug so that samples are not removed when Adding Services, converting a sample quality request to a HiSeq request (tdisera)


5.4.6 (July 30, 2012)
---------------------
* Can now choose External Commercial as pricing for a lab and add External Commercial pricing in the billing screen.  (bspiglejr)
* The detail screen for Order Review screen for sequencing experiments now allows editting of the experiment.  (bspiglejr)
* Order Review screen now shows submit time as well as date. (bspiglejr)
* Fix populate sql script for SlideProduct so that correct foreign keys to organism are used.
* Rework interface for getting experiment, analysis, and data track directory properties, combining read and write properties. (tdisera)
* No longer include 'sample quality' (bioanalyzer folder) as default folder for experiment downloads (tdisera)
* No longer create bioanalyzer directory when request is submitted (tdisera)
* Separate experiment directory by core facility. (tdisera)
* Rework the Lab total billing report to show DNA seq core's request types as columns. (tdisera)
* Mark the instrument run as complete when ALL of the chromatograms have been released. (tdisera)
* Place chromatograms for controls in an instrument run directory. (tdisera)
* Added control well toggle functionality to plate editor. (mbowler)
* Changed method for adding plates to a run ('add' button). (mbowler) 
* Added security checks for dna sequencing core backend functions. (mbowler)
* Fixed problem with plate report not displaying request submitter name. (mbowler)
* Changes to enable file downloading for Exp/Analysis/DT from within the Topics feature. (rcundick)
* Added idSubmitter field to Request and Analysis record to keep track of original submitter. 
* Owner (idAppUser) field can now be changed for Request, Analysis. (rcundick)
* Implemented MiSeq workflow interface. (rcundick)
* Eliminated Captcha requirement for guest users. (rcundick)
* Added option to set default institution via isDefault flag on institution record. (rcundick)
* Allow user with read permissions to save analysis files so that user clicking on 'Distribute Data Tracks' doesn't get insufficient permission exception when analysis files have yet to be created (tdisera)
* Fixed bug that was causing Add members button on Lab detail to be disabled for first user in dropdown (tdisera)
* Renamed 'Submit Request' to 'New Order' (tdisera)
* Fill in experiment name as username-request# if name not provided (tdisera)
* Show experiment name on Info tab of Experiment detail (tdisera)
* Added default_visibility_analysis, default_visibility_datatrack, and default_visibility_experiment properties for setting default visibility. (rcundick) 
* Fix confirmation emails for DNA Sequencing request categories.  (bspiglejr)
* Do not show DNA Sequencing request categories when adding services.  (bspiglejr)
* Sample upload files are now spread sheets with instructions in header to save as tab delimited files.  (bspiglejr)
* Select default user project on Submit Request window, setup tab.  When Lab is saved, save a default project for every lab member and manager. (tdisera)
* Added ability to remove a single plate from a run. (mbowler)
* Added ability to toggle between plates from run tree. (mbowler)
* Added redo status notification, run name, plate name, and idPlateWell to chromatogram detail view. (mbowler)
* Deletion of files from Analysis now do not leave orphaned AnalysisFile rows and correctly delete TransferLog rows.  (bspiglejr)
* Filter prices in billing by core facility chosen.  (bspiglejr)
* Only show core facilities drop down in billing if super admin or admin that administers > 1 facility (bspiglejr)
* Do not allow < 32 samples on a plate at save time.  (bspiglejr)
* Review Results - sort file name column by run, quadrant, well position. (tdisera)
* Added Topics tab to experiment, analysis, and data track detail views. (rcundick)
* Add red label to highlight that experiment has not been submitted (tdisera)
* Show run name, run id on Order review screen (tdisera)
* Make performance improvements to query for Review Orders window.  Speed up queries in GetRequest by returning table columns rather than request objects. (tdisera).
* Default to 'my experiments' for normal user (tdisera)
* Show view and edit links on Order Review screen.  Disable edit link when order cannot be edited. (tdisera)
* Conditionally show 'Back' link on Experiment Detail, Experiment Edit views (only when launched from Review Orders view). (tdisera)
* Filter by pending redos on Review Orders screen (tdisera)
* Do not show annotations for projects in labs which only have coreFacilities marked for no annotations.  (bspiglejr)
* Fix abort when editting Mitochondrial Sequencing or Fragment Analysis requests which already have samples on reaction plates.  (bspiglejr)
* Allow duplicate sample names on DNA Sequencing type experiments. (bspiglejr)
* Fix Distribute Data Tracks bug caused when Analysis file without file extension encountered (tdisera)
* Updated plate report to show assay or primer information for FA and MS experiment types. (mbowler)
* Added codeVisibility and idInstitution fields to Topics table, implemented visibility for Topic. (rcundick)
* Fixed case where workflow changes saved in spite of the presence of extra lanes. (rcundick)
* Fix null reference bug on 'Add Services' introduced with back button on Experiment Detail. (tdisera)
* Rename 'Register Experiment' to 'Post Experiment Data'.  Rename 'New Order' to 'New Experiment Order'. (tdisera)
* Don't show empty project folders for 'My Experiments' view (tdisera)
* Fixed default visibility implementation for Data Track distributions. (rcundick)
* Changed owner dropdown on Topics visibility to only show members and managers of the selected lab. (rcundick)
* Fixed bug causing corrupted XML when isDefault flag set to null in lab institution list. (rcundick)
* Introduced MiSeq experiment platform and workflow (rcundick)


5.4.5 (July 1, 2012)
---------------------
* Changed any text that was displayed to the user from "Sequence Run" to "Sequence Lane". (tcourdy)
* Added isActive to the populate.sql script for both Genome Build and Organism to fix issues that were occurring with a fresh install.(tcourdy)
* Avg insert and cap lib fields are no longer displayed for external experiments on experiment edit view.(tcourdy)
* Fixed display problems with the completed field on experiment edit/detail views.(tcourdy) 
* Removed horizontal and vertical scroll bars for Slide Management window.(tcourdy)
* Tab names now correct for Cap Seq requests in view/edit.  (bspiglejr)
* Fixed problems with usage stat queries. (rcundick)
* Added code to obtain base URL from back end. (rcundick)
* Added window to display links for guest/user direct access to Topic. (rcundick)
* Introduced new dictionaries Assay, Primer and added as foreign keys to PlateWell. (tdisera)
* Moved redoFlag from Sample to PlateWell. (tdisera)
* Is Control for Cap Seq plate requests is now functional.  (bspiglejr)
* New IGB Browser link on Data Tracks view to launch IGB browser (dnix)
* Submission of Fragment Analysis request works.  (bspiglejr)
* Submission of Mitochondrial Sequencing request works.  (bspiglejr)
* Submission of Cherry Picking request works.  (bspiglejr)
* Users can now upload purchase order forms for Billing Accounts. (tcourdy)
* Fixed bug that caused error when trying to link an analysis file to a data track.  Problem caused by not considering fully qualified file path when hashing file. (tdisera)
* Fixed Register files to bypass delete on Analysis files not present on file system when entry has comments or is linked to at least one data track. (tdisera)
* Added isRequired flag to PropertyEntry nodes returned from GetRequest.java, disabled checkboxes for req'd annotations so they cannot be unchecked (rcundick)
* Fixed bug that was not saving changes to a slide's applications on the slide management view properly.(tcourdy)
* Fixed bug that was causing the slide management view to not refresh its display properly as changes were being made.(tcourdy)
* Email to lab billing contact when the work auth is submitted. (tdisera)
* Fixed problem where experiment submit screen lab dropdown wasn't being refreshed after lab added. (rcundick)
* Added core facility comboBox and new request category platform type radio buttons on the configure experiment platform window.(tcourdy)
* Added request category platform type combo box to the experiment platform add window.(tcourdy) 
* Implemented billing plugins for Capillary Sequencing requests. (tdisera)
* Fixes for file copy problems in Organize Files feature for Experiments, Analyses (rcundick)
* Added billing plug-ins for fragment analysis and mit seq experiment types.  changed billing plugin function, adding arugment for assay map. (tdisera)
* Changed definition field edit/display window to RichTextEdit for analyses and experiments. (rcundick)
* Fixed bug where number stepper that asks how many samples in one lane was missing for add services to missing request. (rcundick)
* Added isControl to PlateWell object, added automatic control well to plate editor, updated plate report to show the control well. (mbowler)
* Added ability to drop samples on to any well in the plate on the plate editor. (mbowler)
* Fixed action script errors on plate editor. (mbowler)
* Took out multiple run viewing and editing functionality in plate editor. (mbowler)
* Redo samples now update correctly when building plates or requeueing from chromatogram screen. (mbowler)
* Miscellaneous bug fixes on plate editor and other core sequencing views. (mbowler)
* Removed line replacing ampersand character in requestXMLString in SaveRequest (was causing issues with saving CR characters in description fields) (rcundick)
* Editting of Cap Seq, Fragment Analysis, Mit Seq and Cherry picking works. (bspiglejr)
* Add checkboxes to associate labs with core facilities. (bspiglejr)
* Numerous changes and refinements to the Topics feature (rcundick)
* Fixed bug caused by old code that was deriving core facility notes, analysis instructions from samples instead of new fields on request. (tdisera)
* Remove Seq Run (temp) worklist from HiSeq workflow tab  (tdisera)
* Only show the last month of flow cells on HiSeq workflow tab (tdisera)
* Fix for html formatting problem of the description field in printable experiment form (rcundick)


deploy notes 
--------------------
* Run  update script to set codeRequestStatus to "" on all requests.  (Only new request types get status).  (tdisera)

5.4.4.1 (May 21, 2012)
----------------------
* Change style of Alert (message box). (tdisera)
* Added more rigorous back-end checking for duplicate Lab names. (tdisera/tcourdy)
* Fixed actionscript error in navUsersView that occurred when the datagrid was trying to be refreshed after a pre-existing lab was being saved. (tcourdy)
* Add new backend command for Plate Editor (GetPendingSampleList).  (tdisera)
* More work on nav bar for Super Admin to stay within 1024 width. (tdisera)



5.4.4 (May 18, 2012)
---------------------
* Add PlateType dictionary and codePlateType to Plate -- default to REACTION plate.  (bspigeljr)
* Add plate name and sample drop off location to Capillary Sequencing request submission scrrens. (bspiglejr)
* Group Samples on Capillary Sequencing request submission by plate if chose plate type.  (bspiglejr)
* Added changes for Topics feature.  (rcundick)
* Fixed a bug that was causing the Institutions dropdown on the labView to not refresh properly. (tcourdy)
* Worked on Super Admin state so that both DNA Seq Core links as well as all admin links are present. (tdisera)
* Fixed problem with Data Track link when datatracks_supported property not present or set to 'N' (tdisera)
* Added data track link to home page (tdisera)
* Changed billing plug-in code to correctly handle Illumina target enrichment charges as price per capture, not per sample (tdisera)
* Fixed bug that caused error when trying to delete experiment, analysis, or data track with collaborators.  Fixed by added explicit deletes to backend delete commands. (tdisera)
* Fix check for duplicate lab when new lab is added.  Check for duplicate on last AND first name, ignoring case. (tdisera)
* Position first name text field before last name text field on Add Lab Group window. (tdisera)
* Moved the duplicate lab name validation checking from the client to the server. (tcourdy)
* Fixed Topics bugs. (rcundick)
* Entire directories can now be uploaded using FDT. (rcundick)
* Changed refresh of organize files window to include right hand tree as well. (rcundick)
* Orion can't server large data track files (+ 2GB), so serve data track files (UCSC browser, generic links) from Apache Tomcat rather than Orion.  Web context (file path) and Tomcat webapp URL are GNomEx properties (datatrack_fileserver_url, datatrack_fileserver_web_context). (tdisera)
* Automatically link (in backend code).bai file with .bam file (and vice versa) when Analysis file is linked to Data Track. (tdisera) 

5.4.3
---------------------
* Don't allow sortable columns on Workflow - Illumina Data Pipeline.
* Make average insert size (range) and capture lib design id configurable based on sequencing application.(tcourdy)
* Get rid of duplicate 'Change Password' link on login page.(tcourdy)
* Added isActive check boxes to the organism and genome build windows under the data tracks view.(tcourdy)
* Allow users to search for lab groups based on department name.(tcourdy)
* Projects listed in experiment edit view dropdown box are now sorted alphabetically.(tcourdy) 
* Show instititue/username/password if property set to indicate no university id logins. (bspigle)
* Fix data track query when Analysis files are deleted (get rid of extra trailing comma when analysis files are not yet saved to db).  (tdisera)

5.4.2.3 (May 2, 2012)
----------------------
* Add CoreFacilityLab to hook core facilities to labs.   (bspiglejr)
* Use CoreFacilityLab to get email addresses for admin email for public registry users. (bspigljejr)
* Add CoreFaclilityManagers to allow specifying managers for core facilities. (bspiglejr)
* Distribute Data Tracks - require .bam and .bai files to be dragged together. (tdisera)
* Fix RegisterFiles batch job to correctly match analysis file names in analysis directory (tdisera)
* Order file names alphabetically for Experiment files. (tdisera)
* Name links 'Register Experiment' for external data sharing site. (tdisera)
* Prune all data track empty folders for guest user. (bspiglejr)
* Fix bug in RegisterFiles batch job that was setting baseFilePath to null. (tdisera)
* Fix bug in RegisterFiles that was putting extra forward slash in name, resulting in no hashmap lookup and attempted delete of analysis file db object. (tdisera)
* Validate bam file when linking analysis file to data track (Distribute data tracks window).  (tdisera)

5.4.2.3 Deploy Notes
--------------------
* assign all labs to the default core facility (declare @idMicroArray int;select @idMicroArray = idCoreFacility from CoreFacility where facilityName='Microarray and Genomic Analysis';insert into CoreFacilityLab)


5.4.2.2 (apr 30, 2012)
----------------------
* Allow users with read permission on analysis to distribute data tracks, except for guest. (tdisera)
* Add core facility radio buttons on public user registration.  Hide button if only 1 active facility and default new users to it. (bspiglejr)
* Rename Price.unitPriceExternal to price.unitPriceExternalAcademic in preparation for new unitPriceExternalCommercial.  (bspiglejr)
* Add new Super Admin role.  This is like admin but allows editing/creation of core facilities and assigning users to core facilities.  (bspiglejr)
* Add core facility checkboxes in the user edit screen.  Super Admins have full access, but admins have view access.  (bspiglejr)
* New users added by admins are added to the admin's core facilities automatically. (bspiglejr)
* Admins only see users in core facilities the admin is associated with in the user edit screen.  (bspiglejr)
* Add ability to filter Property Dictionary entries by Core Facility.  (bspiglejr)
* Add Core Facility to dictionary editor.  (bspiglejr)
* Add IsActive flag to core facility.  (bspiglejr)
* Only Super Admin's can edit the core facility dictionary or the Property dictionary. (bspiglejr)
* Gather department name when user specifies a new lab in public registration. (bspiglejr)
* Altered queries for usage stats to eliminate duplicate uploads (rcundick)
* Altered queries for usage report to eliminate duplicate uploads, added cumulative columns to report (rcundick)
* Change login message to 7 zeros after u for uNID. (tdisera)
* Rework XML generation and save of Analysis files to improve performance. Only save dirty analysis files and replace framework XML generation with standard jdom Element to improve performance. (tdisera)
* Improve layout of Analysis Detail, Analysis Edit, Experiment Detail to provide more vertical space for Files tab.  Moved fields at the top to 'Info' tab.  (tdisera)
* Disallow drag-and-drop operation for distribute data tracks on analysis files if extension no a supported data track. (tdisera)
* Sort analysis files in a directory by file name (so that they are ordered alphabetically). (tdisera)
* Fixed horizontal scroll problem on Experiment Detail window (tdisera)


5.4.2.2 Deploy Notes
----------------------
* Rename unitPriceExternal to unitPriceExternalAcademic in the price table.
* Assign all users to the default core facility (declare @idMicroArray int;select @idMicroArray = idCoreFacility from CoreFacility where facilityName='Microarray and Genomic Analysis';insert into CoreFacilityUser select @idMicroArray, idAppUser from AppUser)
* Change selected AppUser.codeUserPermissionKind values from ADMIN to SUPER


5.4.2.1 (Apr 24, 2012)
----------------------
* Changed the validation scheme for the work authorization window.(tcourdy)
* Fixed bug that was causing the organism selected on the Hyb Setup View to change if user went back and changed the organism on the Sample Setup View.(tcourdy)
* Fixed bug where newly created folders could not be filled with files in experiment upload window. (mbowler)
* Fixed bug with moving sub folders in experiment upload window. (mbowler)
* Emergency bug fix that prevented Submit Request and Register New Experiment to complete due to SequenceLane null pointer.  Caused by experiment name feature added in 5.4.2 (tdisera)


5.4.2 (Apr 23, 2012)
--------------------
* Changed weekly usage report to include site in title, changed distribution to use to: instead of bcc: field (rcundick)
* Fix for samplesheet upload problem when SampleGrid dataprovider is a Grouping Collection (rcundick)
* Show experiment name on Analysis Detail and Edit views (Experiments tab). (tdisera)
* Fixed bug that was causing Experiment to have orphaned links to analysis, preventing the delete of the experiment due to FK constraint violation. (tdisera)
* Fix for adding and editing organisms and genome builds from Add Analysis window.  Dropdowns now refresh properly. (tdisera)
* Fixed drag-and-drop logic for Distribute Data Tracks so that .bam/.bai file pairs can be linked to same data track.  Also fixed problem that was causing duplicate analysis file links to data tracks. (tdisera)


5.4.1.1 (Apr 15, 2012)
----------------------
* Fix SQL errors in gnomex_db_ddl.sql.  (tdisera)
* Added Lucene indexing to allow lookup on experiment number, datatrack number and analysis number. 
* For Data Tracks ucsc links - Strip any line returns from the name, summary, or description when making UCSC links. (tdisera, dnix)
* Change account screen no longer requests Department (bspiglejr)
* Change account screen now has radio buttons indicating existing or new lab.  If existing lab user chooses from a drop down.  If new user fills in text box. (bspiglejr)
* Change account screen now has radio buttons for University of Utah or not.  If University of Utah then request UNID.  Otherwise request institution, username and password. (bspiglejr)
* Change Account Screen: If existing lab is chosen user is automatically added as a LabUser to that lab. (bspiglejr)
* Change Account Screen: Users are now added as inactive to allow for review before activation. (bspiglejr)
* Change Account Screen now has more email address validation. (bspiglejr)
* Change Account Screen now has text suggesting university ids be a "u" followed by 7 digits. (bspiglejr)
* Change Account Screen now validates that the combination of first name, last name and email address does not already exist in the database. (bspiglejr)
* Fixed ExperimentDetailView so that Files tab works from Analysis Edit (Experiments tab, double-click on experiment in tree).  Also, will address issue found when trying to show Experiment Detail from new Topics view. (tdisera)
* Changed range on avg insert size (HiSeq experiments)  
* Empty Projects now show in the experiment view. (bspiglejr)
* Empty Analysis Groups now show in the analysis group view. (bspiglejr)

5.4.1
--------------------
* New navigation for DNA seq gnomex admins.  Also, removed LinkButtonBar and replaces with link buttons for
  navigation so that view can be activate from Home view and not the main nav bar (to conserve horizontal space).


5.4 (Apr 7, 2011)
--------------------
* Get rid of QC and Seq prep workflow fields on Samples tab when submitting a request or registering an external experiment.
* To fix delete bug on Analysis, DataTrack with url properties, allow nulls for idPropertyEntry on PropertyEntryValue
* Fixed problem where distribute data tracks not working after FDT upload.  Needed to register analysis files in db before distribute.
* Fixed sql bug in Analysis delete file when analysis file not yet registered in db.
* Fixed multi-select drag-and-drop to distribute data tracks. (Made synchronous http service request calls.)
* Renamed label for segment import from ch1 to chr2
* Added UsageReportd.java and related script files to create weekly usage report for CvDC
* Modified BatchDataSource.java and BatchMailer.java to add an optional constructor that defines path to orion and location of hibernate mapping file
* Modified MailUtil -- added send_bcc command to provide for sending messages with bcc field populated.
* Added AverageInsertSize and CaptureLibDesign field functionality when submitting an experiment.
* Now allow searching of Annotations by property name in advanced search.
* Only allow alphanumeric characters and space in Lab name in Create New Account
* Add validation on email address in Create New Account
* When splitting account any new items created will get the same Billing Status and Complete date as the items they were copied from.
* Fix issue on new user register where if they entered external user name and then switched to UNID it remembered the external user name and still required a password.
* Removed sample prep method dropdowns (nucleic acid extraction method).  Still have text box available but it is optional.
* Fix issue in DataTrack and Analysis annotations with urls.  Alias was used as the URL if entered.  URL is now always used as URL.
* New Download Files link on experiment view which opens Files tab.  Makes download workflow more obvious.

5.4 Deploy Notes
--------------------
* Update nucleic acid methods from dropdown where appropriate -- update Sample set otherSamplePrepMethod=SamplePrepMethod from Sample join SamplePrepMethod on samplePrepMethod.idSamplePrepMethod = Sample.idSamplePrepMethod where otherSamplePrepMethod is null and Sample.idSamplePrepMethod is not null
* Remove idSamplePrepMethod from RequestCategory table
* Remove the SamplePrepMethodRequestCategory table
* Remove the SampePrepMethodSampleType table

5.3.9 (3/12/2012)
--------------------
* The Data Tracks feature is now available in GNomEx.  All GenoPub data tracks have been migrated over. The Data Tracks view allows genome data track files to be annotated and distributed for the purpose of genome browsing in a visualization app like IGB.
* Analysis now has annotations.
* Analysis annotations are searched on full text search.
* When changing to the non-edit view, the dirty flag for analysis is now reset.
* An error used to occur when trying to rename an option in the Property edit screen.  This has been fixed.
* The object which a property applies to is now required before saving the property.
* When a new property is added, the edit screen for the new property now appears automatically.
* The list of properties shown in the property edit screen can now be filtered by object.
* When a new property is added the object the property applies to is defaulted to the current filter(s).
* In Advance Search, when a Experiment Only or Analysis Only warning was given scrollbars would appear.  This has been fixed.
* The user now has the ability to shrink or expand the Advanced Search window in Result View to allow viewing of the underlying screen.
* Properties are excluded from the Annotation view in Data Track if they have no data and are marked inactive.
* Properties are excluded from the Annotation view in Experiment edit if they have no data and are marked inactive.
* Continued bug fixes/refinements for Data Track feature, focusing on linking analysis files to data tracks.
* Fixed scroll bug in Submit Request (and Add Services) for cy3/cy5 label buttons.

5.3.8 (3/5/2012)
--------------------
* Fix bug that was causing label check box (cy3, cy5) for microarray to never check.  Introduced simplified version of item renderer.
* Changed alignment submission interface to allow selection of any file.
* Changed alignment submission interface to allow files from multiple folders.
* Made alignment submission button visible only to administrators.
* Added format check on uploaded sample sheets.
* Fix null pointer (collaborators xml) for SaveAnalysis that was called from http client Java app in tomato pipeline.
* Sort index tag group numerically rather than alphabetically on printable request form as well as seq runs tab on Experiment detail.
* Don't consider unique seq tags when organizing multiplex groups for sequence lanes.  Honor index tag group assigned when experiment was submitted.
* Fix FDT GUI so that user is prevented from closing app (and thus cancelling transfer) before transfer is complete.
* Fix so numberSequencingCyclesActual in FlowCell is deprecated and only the one in Flow Cell channel is used.  Note that the "Seq Prep" workflow step and Edit Flow Cell code now set numberSequencingCyclesActual in all of the channels associated with the flow cell being created/edited.

5.3.7 (2/26/2012)
--------------------
* Added Instrument, Run Number, Side, # Cycles, Paired vs. Single read to Cluster Gen tab.
* Added Instrument, Run Number, Side, # Cycles, Paired vs. Single read, Cluster Gen Date and Seq Run Complete Date  to Cluster Gen tab.
* Removed Organism from the Cluster Gen grids.
* Changed work flow so that creating a flow cell channel now puts it directly to Data Pipeline.
* Changed name of Cluster Gen in workflow to Seq Run Setup
* Changed name of Seq Run in workflow to Seq Run(temp).  Seq Run(temp) will remain until all items in it have been cleared to data pipeline.  It will then be removed in a future release.
* Flow Cell Edit does not update the run folder if any of the pieces used to build it are null.  Pieces are Cluster Gen Date, instrument, run number, side and bar code.
* Folder can no longer be edited in the data pipeline grid. 
* Actual # Cycles is now editable in the Data Pipeline
* Cluster info, Q30 and file name removed from experiment grids.
* Read 2 cluster removed from all spots shown (Flow Cell edit, Data pipeline, Flow Cell Report)  Also removed from backend.
* Read 1 cluster renamed to Cluster.
* Q30GB replaced by Q30Percent in system.  This includes Pipeline, flow cell edit and flow cell report.
* Account for null fileSize when calculating total disk space for usage data
* Fixed bug that was causing (null) in flow cell notes instead of organism name
* Fixed bug that caused 'is control' not to be automatically checked when control dragged to flow cell changed on Seq Run Prep window.
* Change Flow Cell Edit window to use content numbers so that grid column shows sequencing control name rather than blank
* Allow analysis and experiment collaborators to upload data if collaborator flagged with 'upload data' permission.
* Put debug messages in RegisterFiles to figure out why B2B AnalysisFile objects are getting deleted.
* Fixed bug in RegisterFiles that was causing all analysis files to be deleted - see analysis.getKey()
* Fixed RegisterFiles so that it recurses analysis file structure when registering analysis files.

5.3.7 Deploy notes
---------------------
Added canUploadData column to RequestCollaborator, AnalysisCollaborator

5.3.6 (2/16/2012)
--------------------
* Made DoNotReply address configurable (reply_email_core_facility_workauth_reminder and dataset_privacy_expiration_reply_email)
* Made changes to display error message in password-related jsps when RollBackCommandException thrown in ChangePassword.java and PublicSaveSelfRegisteredAppUser.java.
* Get http_port property using qualified name (try with appended server name first).  This will allow different port numbers to be used depending on app server.
* Don't show warning about how user isn't assigned to labs on welcome screen
* Prompt user to expand search when no experiments found.
* Added meta tags to insure login.jsp is not cached.
* Made change that allows user to enter the barcode in the Gnomex workflow even if it only has one sample.
* Fixed obscuring of long Group(Lab) names on analysis edit.
* Fixed bug that threw a billing error when a user was registering an external experiment.
* When a user registers an external Microarray experiment the Microarray slide list dropdown will be filtered based on the Organism and Experiment Platform that the user selects.
* Analysis Groups tab when editing an analysis is now read only
* Fixed issue with Analysis Group dropdowns when adding a new analysis.  Dropdown for other labs always showed Analysis Group values from first lab expanded
* Fixed issue with Project dropdowns when editing an experiment.  Dropdown for other labs always showed project values from first lab expanded.
* Added new InvoicePrice field to BillingItem to replace TotalPrice.  TotalPrice no longer used in code but will be reused when split by amount is implemented.
* After deploy (but before anyone uses code) run following query to make sure invoicePrice is correct 'update BillingItem set invoicePrice=totalPrice where invoicePrice != totalPrice or invoicePrice is Null'
* Rename sql files for better sorting.
* Show totals on Usage view for downloads, uploads, and disk space.
* Reassign transfer logs to new lab when experiment reassigned to different lab through drag-and-drop.  Now the usage data will be associated with the correct lab.
* Show detail when gnomex admin clicks on usage chart 'activity by week'.
* Made it so that when a user clicks "new group" the detail panel view is not displayed.  This will prevent a user from clicking "cancel" on the add new group pop-up and then creating a group through the detail panel view.  
* The detail panel is now only shown when a group is selected or a new group is successfully created.
* Implemented a check on the GroupAddView that makes sure when a user is creating a new group that they are not selecting a group name that has already been created.	
* Change invoice so it shows any other accounts that have percentages in the request.
* Completed implementation of split by amount.
* Changed Analysis Files set up, allowing sorting and organizing analysis files into folders.  
* Changed Experiement File organizing so that folders are displayed properly and files are more easily moved.  
* Change implementation of splits so that split type is stored in billing type and calculations are done when qty/unit price is changed after split.
* Fixed FDT download for flow cell reports
* Fixed zip entry path for flow cell reports on normal download (got rid of extra / in path)
* On WorkFlow screen make the HiSeq the default workflow (i.e. first tab).
* Add remove button on WorkFlow/HiSeq/Cluster Gen view.
* Started introducing Capillary sequencing experiment into GNomEx submit request view.
* WorkFlow/HiSeq/Cluster Gen view -- dragging a whole lane would reverse order of work items.  This has been fixed.
* Added experiment description boxes for users to optionally fill in when registering their experiments.
* Updated the print request form to display any experiment notes that the user enters when creating their experiment.
* Added code for submitting sequence alignemnts (feature not completed but is suppressed by sequence_alignment_supported='N')
* Added properties 'sequence_alignment_supported' and 'sequence_alignment_server_url'
* Added database tables AlignmentPlatform, AlignmentProfile, GenomeIndex, and AlignmentProfileGenomeIndex
* DB updates are in gnomex_db_upgrade_to_5.3.6.1
* Fixed bug that was causing dropdowns not to refresh in the group detail view after a new user was added from the nav users view.
* In the samples view the sample description column has been moved to the end.  This will give more space for long sample descriptions since flex automatically gives the last column the most space by default.  Also word wrap has been enabled for this column as well.
* Editting the name and date on the flow cell edit window now saves the changes.
* When a request is split in the billing window, a refresh would sometimes reposition on the wrong part of the split.  This has been fixed.
* Allowed for editing of comments for analysis files in AnalysisEditView.
* Added a checkbox for an analysis so all files can be selected at once.
* File size does not display for files not on the user's file system on AnalysisDownloadView.
* Fixed a problem with new folders not sorting on AnalysisUploadView.
* Made improvements to look-and-feel of login web page (and register new user, reset password pages)

5.3.6 Deploy Notes
--------------------
* In Billing Item rename TotalPrice to InvoicePrice
* In Billing Item new column splitType should be initialized to "%" if null on deploy.
* New db objects for HSC cores: Chromatogram, CoreFacility, InstrumentRun, Plate, PlateWell
* Added idCoreFacility to Analysis, BillingItem, Request, RequestCategory, WorkItem

5.3.5.1(12/21/2011)
--------------------
* Added text box to the user detail view that allows for entry of UCSC URL.
* When user selects organism when registering an experiment the organism selection will now propagate to the hyb setup tab.
* Tool tips will now display when the user mouses over the Sample Annotations.  Tool tips will display the description associated with the sample annotation.
* Added two check boxes to the Sample Annotation configuration screen that details whether the annotation is for Sample or for Data Track.
* Fixed bug that would cause an overwrite of a current experiment code application by the last saved experiment's code application.  Occurred in ExperimentEditView.
* Added new fields to the Organisms Window (binomial name, sort order, ncbi tax id, build date, das2name)

5.3.5
--------------------
* Added call to setDirty when annotation owner changed
* Changed Annotation security so lab managers can update if no owner
* Converted PendingWorkAuthd query to HQL
* When user self-registers, default user to isActive='Y'

5.3.4.2 (12/14/2011)
--------------------
* Removed 'Downloads' link, fixed files refresh when selecting a new experiment, reset tab index to 0 when switching to a new experiment or from 'edit' to 'view' or vice-versa.
* Added check to insure that "description" cannot be used as the name for an annotation
* Added "Copy Column" feature to sample view
* Minor correction to GetAppUserPublic to add " Lab" to the labName string
* Fixed problem with not being able to log in after changing password
* Fixed user self register email problem when property for work auth admin had multiple emails.
* Many small fixes to sql in upgrade scripts

5.3.4.1 (12/13/2011)
--------------------
* Fix PropertyDictionary references in reset password, change password, register new user.
* Fix parameters on reset password, change password, register new user jsps.
* Added email confirmation to bioinformatics core when a next gen sequencing experiment is finished and has a genome build align to filled in or analysis instructions.

5.3.4 (12/12/2011)
--------------------
* Added dropdown for Organism to initial screen for external experiment registration.
* Made Organism field in Sample View read only for external experiment registration.
* Removed columns not selected in the Annotations tab for external experiments.
* Removed links/check boxes/fields: To GAIIx, Show QC Columns, Illumina Prep, Completed field for exter nal exps.
* Removed Sample Sequencing Run tab for external exps and made sure deleting corresponding samples does not initiate a prompt.
* Implemented check to require completion of any required annotation fields in Sample View.
* Removed Download link for external exps.
* Fixed null pointer problem in SequenceLane.java that caused XML reflection error for some Experiments.
* Fix bug in GetExperimentPickList that was causing error on next gen experiments that were not Illumina requests. (Bugs item #3444572)
* Fixed bugs causing exceptions when switching saving new Experiment to registering new Experiment
* Introduced new GenoPub objects (DataTrack, DataTrackFolder, Segment, etc.) and user interface, marking the first phase of merging GenoPub functionality into GNomEx.
* Tightened up hibernate code in SavePriceCategory in response to db lock that occurred in on production db server around 11:30 on Tuesday, Dec 6th.
* Fixed bugs in connect code for DatasetExpirationCheckd, PendingWorkAuthd, and RegisterFiles.
* Fixed problems with selected genome build not propagating to confirm view, printable experiment form, and confirmation email.
* Fixed issue where actual customers were cc'd on request confirmation emails when system being tested.


5.3.3.1 (11/17/2011)
--------------------
* Fix authentication code in httpclient java apps to use new login_verify.jsp 
* Fixed SaveAnalysis to handle multiple genome builds; removed idGenomeBuild from Analysis.
* Fixed bug so that Analysis files can be removed (analysis number was duplicated in filepath).
* Moved upload link down to files tab on Analysis detail and Analysis edit windows.


5.3.3 (11/15/2011)
--------------------
* Introduced code and configuration to run gnomex under Apache Tomcat server (with OpenEJB).
* Added IlluminaExomeCapturePerCapPlugin to account for per capture pricing on exome captures.
* Added a 'Files' tab to the experiment browse and edit views.  This allows the user to download experiment files and to delete files in edit view.
* Removed the files tab on experimentDetailView when submitting an order.
* Removed hard coding for experiment icons. Interface now displays the icon specified in the Experiment Platform configuration.
* Changed icon selection in Experiment Platform Configuration window from text field to combobox.
* Fixed null pointer problem in GetSlideList.java.
* Changed build.xml to add idAppUser to url parameters at are passed to GNomEx on startup (allows launch directly to AppUser record).
* Added sendUploadAlert field to table definitions for LabUser, LabManager, and LabCollatorator in gnomex_db_ddl.sql
* Created gnomex_db_upgrade_to_5.4.1.sql to upgrade current db for above fields.
* Added self-registration feature to allow new users to enter account info which then creates an inactive AppUser record and sends a request to admin to add user to appropriate lab and activate the account.
* Changed User Account settings window to display labs user is member/manager/collaborator for and allow selection of labs for which to recieve upload alerts.
* Altered RegisterFiles class to determine which labs have uploaded data and send out alerts.
* Cleaned up extraneous code in PendingWorkAuthd
* Changed register_files.cmd and register_files.sh to include java mail in path.
* Set initial value to 0 for number of samples per flowcell channel on Submit Window (for seq requests), forcing client to choose a number (used to default to 1).
* Show 'upload' and 'organize files' link for all experiments that can be edited by user, not just external experiments.
* Prompt for FDT upload/download of download size exceeds 1 GB (rather than 4 GB).
* Changes to add Description field to Annotations.
* Remove Files tab from amend request.
* Fix for problem that resulted in old billing statements being sent out.

5.3.2 (Oct 17, 2011)
---------------------
* Added complete date field to BillingItem. 
* Added complete date to the billing view with the option to set or edit it.
* Changed the look of the billing invoice so that line items are grouped under the requests with the complete date shown for individual line items.
* Added a simple slide configuration window
* Allows users to create a new slide while registering a new experiment
* Added info about kind of user (admin, univ guest user, user without lab group assigned) to home (welcome) view
* Made slide source configurable on screen (reused slide can be inactivated an no longer show on submit microarray request)
* Made session timeout dialog smaller, used different color for bar showing session has timed out
* Removed GAIIx workflow tab (configurable based on de-activating request category)
* Fix search view so that checked project experiment factor or design stays checked after scrolling
* Added ant call to build script convert to Unix CRLF for all shell scripts (.sh)
* Fixed the Edit Flow Cell window so that a single click does not register as a change
* Added 'Login as guest' link to Login window.


5.3.1 (Oct 10, 2011)
---------------------
* Added edit flow cell screen which allows for adding and removing channels and assigning different sequence lanes to a channel
* Added the ability to select a theme for experiment types on the experiment platform window
* Experiment types with unassigned themes are categorized under 'Other' header on seq setup tab on seq submission
* Increase width of billing description on confirm tab of Submit Request window.
* Added Institution Window to allow user to add and remove institutions
* Added hci.gnomex.daemon.DatasetExpirationCheckd which checks for privacy expiration and sends out advance warning when it is set to expire.
* Fixed bug where null pointer exception generated if lab billing email not present and estimated charges notification being sent out.
* Added new table columns to SequenceLane to record data pipeline info: readCount and pipelineVersion


5.3 (Sept 26, 2011)
---------------------
* Get rid of obsolete properties: pricesheet1_name, pricesheet1_url, pricesheet2_name, pricesheet2_url, ..., workauth_doc_url, workauth_pdf_url
* Added additional property initializations to gnomex_db_populate.sql
* Fixed bugs in sample sheet upload
* Redesigned several experiment/analysis windows to eliminate scroll bars when viewing at 1024x768.
* Provide more detailed instructions on launching the FDT upload/download from the browser.

5.2.9.1 (Sep 21, 2011)
----------------------
* Excluded getRequest from ExperimentFile XML to fix problem encountered in 'Add Services' after request to amend was selected.  Caused by E4X error when more than one 'Request' node encountered in XML.

5.2.9 (Sep 20, 2011)
----------------------
* Added session timeout warning dialog
* Fixed billing account dropdown bug on Submit Request window.  When another lab was selected, billing account dropdown did not refresh properly.
* Allow string parameters for CreateAnalysisMain (used in analysis pipeline)
* Set cookies on http Java apps to work with forms based authentication
* Added ability to associate multiple genome builds with an analysis
* Reformatted New Analysis window and added links to "Add/Edit..." organisms and genome builds
* Added privacyExpirationDate to Analysis and Request tables. Field is edited via visibility tab.
* Added dictionary properties dataset_privacy_expiration and dataset_privacy_expiration_warning to govern use of privacyExpiration date field.
* Added request owner first name and last name to Lucene search index
* Fix billing plug-ins to ignore inactive prices


5.2.8.1 (Sep 7, 2011)
----------------------
* Remove hardcoded reference to mysql jar in batch scripts
* Added new usage pie charts for experiments by type, analysis by type, seq applications 


5.2.8  (Sep 6, 2011)
----------------------
* Treat login with 'guest' user account as a guest login, just like URL with parameter isGuest=Y
* Fixed logic for Experiment downloads and Experiment progress to work with now 'All experiments' filter.
* Fixed logic for Experiment downloads and Experiment progress to work for users not assigned to a lab.
* Show disk usage by lab, year, and category on Usage charts.

* Added hint to Experiment/Analysis Visibility tabs to tell how to activate Institution dropdown.
* Changed billing request lookup to find requests without needing to use "R" in the request number.
* Set lookup button as default when enter pressed in billing request lookup.
* Fixed bug where new price category causes corrupted tree.
* Use analysis_read_directory property (not analysis_write_directory) to read analysis files on file system in GetAnalysis
* Introduce ExperimentFile object to track disk usage. (Also added fileSize to AnalysisFile.)
* Added batch job RegisterFiles to track experiment data files and refresh analysis data file sizes. 


5.2.7 (Aug 29, 2011)
----------------------
* Changes to insure billing statement doesn't get sent again if a change is inadvertently made to an item on an invoice that has already been approved and sent.
* Sample sheet upload process will now automatically create new sample rows if there are not enough to accommodate all rows of the uploaded sample sheet.
* Remove references to transfer log for experiment or analysis files that are deleted.
* Reassign lab on transfer logs when experiment or analysis lab is changed.
* Fixed bug so that the analysis drag-and-drop to a different lab works, reassigning the analysis to a different lab.


5.2.6.2 (Aug 28, 2011)
----------------------
* Fashion Analysis filters after Experiment filters (my, my labs, other labs public, all).


5.2.6.1 (Aug 26, 2011)
----------------------
* Fix FDT downloads to handle large file selection and large file names by caching file names using actionscript HTTPService rather that URL.
* Fix logic for parsing zip entry name and main folder name to account for symbolic links for experiment and analysis directories.  Reworked logic to handle different forms of symbolic links that don't necessarily match part of the experiment directory path.


5.2.6 (Aug 25, 2011)
-----------------------
* Add "Show all" checkbox to Analysis browse, and Experiment brows for non-admins.
* Limit analysis and experiment count to 2000 entries.  Warn when results truncated.
* Fixed bug causing billing statements to be sent incorrectly
* Fixed bug causing some experiments to not show up on Experiment list on Billing tab.


5.2.5 (Aug 24, 2011)
------------------------
* Allow samples with duplicate index tags to be combined into one multiplex group.  (Warn user, but permit it.)
* Show experiment type on QC worklist
* Fix bug that was causing delete analysis to fail due to foreign key constraint violation on transfer log table.
* Add "All" checkbox on Experiments view so that admins can view all experiments for all labs without any other filters.


5.2.4 (Aug 22, 2011)
------------------------
* Fix bug that was causing saves to fail on Edit Experiment view.  Bug introduced in last release (GNomEx 5.2.3) when code was changed to only check 'Show QC' on internal experiments.
* Fixed experiment lookup to handle experiments with base number.  MySQL query using [0-9] changed to %.
* Allow lanes to be added, removed, copied on external experiments for admin, owner of experiment and lab manager.
* Show sample sequence lanes on Edit Detail for external sequencing experiments.
  

5.2.3 (Aug 20, 2011)
------------------------
* Fix parse file folder logic for downloads to handle case where canonical path does not match property for experiment directory
* Show usage charts on startup (rather than welcome view) if property show_usage_on_startup set to 'Y'
* Don't check 'show QC' columns for Experiment detail when experiment is an external experiment.


5.2.2 (Aug 17, 2011)
-------------------------
* Simplify welcome screen for "external data sharing site", leaving out links to billing, submit request, etc.
* Added property driven title and welcome message to customize site’s GNomEx UI.
* Fixed bug that was causing fdt uploads to not be register in usage data (on experiments with revision numbers)
* Fixed bug that was causing uploads to go to wrong directory when experiment had revision number


5.2.1 (Aug 16, 2011)
--------------------------
* Allow non-admin gnomex users to view usage charts based on property setting.
* Change FlowCellChannel.qc30Gb to decimal (from integer)
* Add flag to Lab to exclude from usage data
* Automatically show QC columns on Experiment view when experiment is a QC experiment


5.2 (Aug 15, 2011)
--------------------------
* Switched to form-based authentication.
* Added password reset/change for external users.
* Fixed bug preventing username from being saved with session login.
* Changed wording on alert when price removed from price sheet.
* Added logout functionality.
* Set index tag group on sequencing experiments using barcoding even when only one sample
submitted.  Needed so that index tag dropdown is appropriately enabled on lib prep worklist.
* Worklist changes:
** Sample Quality: Omit Bioanalyzer method, frag size from, and frag size to
** Library Prep: Omit library conc, Bioanalyzer method, gel size range to and gel size range from
** Cluster Gen: Omit Sample conc (pM)
** Seq run: Omit clusters per tile
** Data pipeline: Omit clusters per tile and PhiX error rate
** Data pipleline: Add read read1 clusters passed filters (M), read2 clusters passed filters, Q30 (GB)
* Fixed bug that was causing visibility and sample seq runs tabs to be disabled on 'Edit experiment' window.
* Fixed bug that was causing 'addchild' flash error for experiments view for guest login
* Allow experiment owners and lab managers to delete experiment as long as samples haven't gone through a workflow step yet.
* Switch to forms based authentication in http client java apps (package hci.gnomex.httpclient)
* Introduce java main for creating fdt upload staging directory for fdt command lin uploading


5.1.9.2 (Aug 9, 2011)
----------------------
* Fixed null pointer exception in SaveRequest that occurred when estimated price warning email was sent and billing contact email was null.


5.1.9.1 (Aug 1, 2011)
-----------------------
* Fixed bugs in sample sheet upload


5.1.9 (July 28, 2011)
-----------------------
* Replaced sample sheet upload with new version that handles all editable fields
* Make 'additional lanes to sequence' on the samples view more prominent on 'Add services' window.  (Highlight and move to left).
* Usage charts show only whole numbers on vertical axis.
* User needs to be able to select index tag from dropdown on samples grid on sequencing request where lab has already prepped library.
* Fix the permissions for the fdt upload and download servlets so that the Orion application can write to the directory created under the fdt staging dir. 


5.1.8.1 (July 23, 2011)
-----------------------
* Added transfer logging for fdt uploads and download using java main (hci.gnomex.httpclient.TransferLoggerMain)
* Make fdt user and group in FDT servlets property driven
* Add missing fdt properties to sql populate script
* Added Usage view to GNomEx to show activity by lab and by week in chart form


5.1.8 (July 17, 2011)
-----------------------
* Upload/download logs for flex and html http uploads and downloads
* Fixed bug that was causing save error when adding lanes to a request (codeApplication was blank)


5.1.7.4 (July 16, 2011)
-----------------------
* Fix download folders bug that was causing number parsing exception when folder contained character 'E'
* Allow folders created in 'Organize files' window to be removed.


5.1.7.3 (July 15, 2011)
---------------------
* Fixed for the scrolling speed problem on the billing window price drag/drop. 
* Added a property to define who recieves the pending work authorizations message, fixed the problem with the account number in the work auth notification email.


5.1.7.2 (July 14, 2011)
---------------------
* Save labeling, hyb, scan, and fe protocol defaults based on request category and application rather than sample type and application.
* Default sequencing option name when paired or single checkbox checked on Experiment Platform config window.


5.1.7.1 (July 13, 2011)
---------------------
* Remove extraneous instructions from submit request window, fix horizontal scrolling problem
* Finish work on Experiment platform config (prompts for delete, isActive, add new platform, etc.)
* Add CharacteristicType to populate script.

5.1.7 (July 12, 2011)
---------------------
* Wrap up work on Experiment Platform config
* Fix for problem with Organism refresh. 
* Added feature to email lab if order > $500.00. 
* Modified PendingWorkAuthd to be able to run either as a scheduled task or a daemon.
* CAN_SUBMIT_REQUESTS permission set to "Y" for admin even if no lab groups are setup.
* When lab preps (instead of core facility) the seq lib using index tags, check that barcode sequences or selected index tags are unique across samples belonging to same multiplex group
* Fix bug that was causing organism dropdown to de-select when nucl. acid extraction method chosen on submit request window.  Bug introduced with Organims config window.
* Workaround to DropdownLabel.updateDisplayList issue which calls parentDocument.parentDocument.isEditState
* Filter by isExternal, isInternal flags when showing experiment platforms on Submit Request vs Register External Experiment windows.
		

5.1.6.1 (June 28,2011)
---------------------
* Fixed bug causing billing account with same name to not show up.
* New Organism edit window.
* Fix for autoscroll on billing window


5.1.6
---------------------
* Reworked external experiment submission screen.
* Added isRequired and platforms to Sample annotation configuration.
* Fixed problem with Lucene ability to search on partial words.
* Changed wording on upload Sample Sheet instructions.
* Removed fill button from Sample Name column
* Added module to send work authorization reminder messages (currently for test only)
* Removed code that prevents exp. submission if insufficient funds. Added checkbox to commit to payment.
* Allow samples from different experiments to be combined in one flow cell channel on Clust Gen worklist window.
* Sequence sample sequence lanes on Edit window so that save will work on external submissions.
* New interface for managing Organism/GNome Build.


5.1.5.2 (May 18,2011)
---------------------
* Applied Fill button to all relevant WorkFlow and Sample submission fields
* Make bulletin on home page property driven.


5.1.5.1 (May 17,2011)
---------------------
* Fix bug that was causing blank sample annotation column header.
* Applied Fill button to all relevant WorkFlow and Sample submission fields


5.1.5 (May 11, 2011)
--------------------
* Introduced new data types for Sample annotations (text, checkbox, single-select, multi-select).
* Renamed 'barcode sequence' and 'barcode tag' to 'index tag'.  Renamed 'multiplex group' to 'index tag group'.
* Allow 1 sample per lane on barcoding question (seq submissions).
* Don't ask barcoding questions on external experiments.
* Fix for dictionary update problem where an item is saved when other tree items have been expanded above it.
* Updated core ordering page.
* Enabled edit of $ amt on PO billing accounts
* Added "Fill" button to fill in workflow parameters for all samples on an experiment.
* Added code to only submit items that have changed when updating billing and to check each billing period for readyToInvoice when there are multiple periods on the request.


5.1.4 (Apr 27, 2011)
--------------------
* Moved FDTFileDaemon to gnomex opensource hciFDT source tree.
* Add other organism to lucene search index.
* Add section to install notes for configuring GNomEx to use FDT
* Fix for retrieving codeApplication when no buttons present in microarrayAppRadioGroup (saveRequest function in ExperimentEditView.mxml).
* Allow save of experiments with no billing accounts.
* Added instructions for command line download/upload to commented section in jnlp files (added fdt_jar_location property in case we need to change location for obtaining fdt file -* currently http://monalisa.cern.ch/FDT/).
* Fixed problem with billing period not being set when price dragged to billing sheet. Added code to validate that billing period has been selected.
* Fix bug that was ignoring barcoding radio selection of yes when user submits Illumina GAII seq request.
* Reworked fix for unusual characters in protocol description -* completely escaping the text was causing problems for the Lucene index compile. Replaced with a custom function to escape special characters.
* Modified Lucene search to add the ability to search on partial words.
* Combine Number Seq cycles and Seq run type into one set of radio buttons on Seq submissions.


5.1.3 (Apr 19, 2011)
---------------------
* For experiment submission, default the organism and sample prep method dropdown select based on request category
* For sequencing experiment submission, only ask if samples are barcoded if the request category dictionary indicates that sample barcoding is options.
* Fix for dictionary update problem where an item is deleted when other tree items have been expanded above it.
* New month selector for billing period.
* Unusual characters such as ° and µ can now be saved/retrieved correctly in protocol description (under Materials & Meth).
* On seq submissions with multiplexed samples, sample order was scrambled after sample deleted.  Fixed by enforcing sort order on groupingCollection.
* Disallow non-admin users to edit sample multiplex number on Experiment Edit window. 
* Show sample barcode sequence alongside sequence tag name on all dropdowns (workflow, seq submission, experiment edit).
* Don't allow core prep instructions or analysis instructions to be changed at the sample/seq lane level.  For now, instructions are still stored at the detail level but in the UI, are shown at the experiment level.


5.1.2 (Apr 5, 2011)
---------------------
* Rename labels (Sample setup, Sequencing setup) on Request Submit confirm tab.
* On Submit window, order request category radio buttons by dictionary defined sort order.
* Be able to name experiments. Name is searchable and viewed in the experiment tree.(Apr 12, 13 2010)
* Add 'change password' link to home page of external users (non-submitters).
* Improve logging in fdt file daemon.  If java file rename doesn't work (because file is being moved across file systems), try "mv" command next.  As a last resort, copy file. Report last activity when file renamed, moved, or copied.


5.1.1
----------------------
* Reworked FDT interface so that daemon is responsible for moving upload files from fdt staging directory to experiment/analysis directory.
* Show uploaded experiment files in upload staging area in downloads (under root experiment directory)
* Moved link buttons to top of Experiment and Analysis Detail and Edit views for (to fit in 1024x768 space)


5.1 
----------------------
* Introduced Robb's PropertyHelper code for getting Experiment, Analysis, and Flowcell directories
* Fixed code that was removing analysis from file system by adding file separator between base directory and year.
* Refinements to FDT uploads and downloads.  Require authentication for upload servlets.  
* Get rid of unused FastDataTransferServlet.java.  
* Rename fdt properties.  
* Launch upload from main analysis and experiment windows rather than side link on upload popup window.
* Fix bug in download zip that was causing extra "blank" directory because of // in zip entry

5.0.9.5 (Feb 15, 2011)
----------------------
* Make port number for http property driven so that flex uploads (that require http rather than https) work.
* Use read-only session on all Upload servlets.
* Replace plupload with standard-issue HTML multi-part upload forms.  Add html upload form for Experiment upload.
* Don't show billing area on Confirm tab for external projects. 


5.0.9.4 (Feb 10,2011)
---------------------
* Provide java main for creating analysis in batch job
* Allow property for lucene index to be qualified by server name.


5.0.9.3 (Jan 31, 2011)
----------------------
* Fix bug that was preventing CC Number from importing on sample sheet (Submit request).
* Fix events on comboboxes on Submit Request tabs to fire when user hits hot key for selection.


5.0.9.2 (Jan 25, 2011)
---------------------
* Fix 'Add group' bug caused by missing parameter for institutions


5.0.9.1 (Jan 20, 2010)
----------------------
* Make error handling more robust and error messages more informative for 'Upload sample sheet'.
* Fix bug that was causing lab dropdown to clear on 'Submit Request' when admin refreshed dictionaries in the middle of a Submit Request operation.  

5.0.9 (Jan 18, 2010)
---------------------
* Added institution level visibility on experiments and analysis
* Fix Experiment Edit window to show checkbox for 'CC Number'.  
* Fix selection problem with lab dropdown on "Submit Request" window. (Didn't refresh app user combo on first selection.)
* Avoid simultaneous calls to get billing list, get pricing list to prevent random error on Windows 7 clients.  (Get pricing when user clicks on pricing tab in Billing.)


5.0.8.3 (Jan 5, 2011)
---------------------
* Fix date comparisons to use YYYY-MM-DD for sql queries to work on MySQL platforms.
* Fixed bug that was causing blank analysis when user clicked on Analysis link for Experiment that belongs to a different lab.
* Fix bug that was prevent analysis file from being removed from file system when it was back-door copied rather than uploaded from GNomEx.
* Fix event timing on 'Upload analysis files' so that file only appears in 'Uploaded' list when entire file has been uploaded.

5.0.8.2 (Jan 3, 2011)
----------------------
* Worked around Mac Copy/Paste problem that was stripping new line characters by introducing TextAreaWorkaround class.
* Moved gnomex_db_ddl.sql, gnomex_db_populate.sql to /sql subdir
* Moved .cmd, .sh to /scripts subdir
* Include README_UPGRADE.txt distribution 


5.0.8.1 (Dec 27, 2010)
----------------------
* Fix bug that was causing error on save of Analysis when file registered in the db but not found on the file system.
* Fix bug that was preventing 'clear all' Analysis files from working.
* When file registered in db but not on file system, just show 0 bytes instead of post-fixing (FILE NOT FOUND) to name.
* Analysis file upload is in a popup window rather than embedded in the Edit window’s file tab.
* Fix bug introduced in 5.0.8 that was causing $0 estimated price on QC bionanalyzer requests.
* Introduce import Sample Spreadsheet feature (Thanks Robb!)


5.0.8 (Dec 20, 2010)
---------------------
* Compile with Flex 3.5 SDK, provide instructions for building with Flash Builder 4
* Handle case where experiment, analysis, flowcell directory properties don't end with file separator
* Account for Windows 7 // in File.getCanonicalPath()
* Account for case differences in experiment directory and file name
* Make dictionary editor work with flex sdk 3.5 compile (setData has to occur after component added)
* Clean up home page 
* Fix QuBit PicoGreen billing
* Add QC experiment sample type, sample names to searchable index 
* Double-click on Analysis search results brings up Analysis detail.
* Make search a popup window rather than a full pane.
* Moved gnomex_db_ddl.sql, gnomex_db_populate.sql to directory sql.
* Created upgrade sql script

5.0.7.1 (Dec 7, 2010)
---------------------
* Make 'Add Services' window dictionary-driven from experiment category
* Omit external experiments from list of experiments listed for 'Add Services'


5.0.7 (Dec 6, 2010)
---------------------
* Make experiment category on Submit Request window dictionary driven
* Add field icon, type to RequestCategory dictionary
* Centralize code for getting tree icons
* Fix Add Analysis bug introduced in 5.0.6
* Validate CC Numbers against BST

5.0.6 (Nov 30,2010)
----------------------
* Use explicit XML list to drive deletes of analysis file
* Show final sample conc. pM on Experiment Detail sample seq runs tab
* Make initialization http service requests synchronous to observe if Windows 7/Flash player launch problem persists


5.0.5 (Nov 29,2010)
---------------------
* Rename Sequence Lane to Sample Sequence Run in UI
* Fix samples grid in Edit Experiment window to always show flat view, allowing user to edit multiplex group number
* Don't highlight missing required fields on Edit window
* Fix Analysis Edit files tab so that unregistered files show and can be saved with comment
* Fix bug that was preventing samples from being organized by multiplex group number for custom barcoded samples (lab prepping own samples)


5.0.4.1 (Nov 24, 2010)
--------------------
* Fix sort order of lanes in multiplex lane
* Fix sort order of samples (when multiple group number no sequential with sample numbers)
* Fixed bug so that correct qty calculated for sequencing billing item (number of lanes).
* Fixed printable request form for non-multiplexed lanes
* Fixed bug causing error when bringing up Labeling work list
* Adjust screen layout for Cluster gen work list for more sensible use of horizontal.


5.0.4 (Nov 23, 2010)
--------------------
* Make GNomEx sample linkage to BST property driven. (Won't show up for non-HCI installs.)
* Allow user to arrange multiplex groups of samples for Illumina experiments.  
* Allow user to specify custom barcode sequence when lab preps own library
* Fix bug that was causing error on 'New Project' when app user not selected from dropdown on new requests.
* Fixed auto-email to work with SMTP servers that require authentication (e.g. gmail smtp server).
* Fixed bug that was causing idAppUser to be blank on Submit Request when admin switched between Submit Request and another main link (like Workflow or Experiments)


5.0.3 (Nov 1, 2010)
---------------------
* Fix bug that was causing 'Next' button to be disabled when switching to another main link during 'Submit Request'.  GNomEx was forced to reselect app user from dropdown to continue.
* Get rid of horizontal separator when dragging uploaded files to folders for external experiments. Expand tree node of folder after upload file drop operation.
* Fix bug so that external price charged when price dragged onto experiment billing for lab marked as 'External pricing'.
* Get rid of suffix " * sequencing reads" on Illumina download folders.
* Fix bug that was showing internal prices for estimated charges on Submit Request for lab with external pricing.


5.0.2.1 (Oct 28, 2010)
---------------------
* Fix bug that was causing Sample prep method to revert back to default on Illumina requests


5.0.2 (Oct 27, 2010)
--------------------
* Allow user to enter alternate text to describe nucleic acid extraction method when dropdown options don't describe method.
* Fix bug that was causing subsequent text searches (on Nav bar) to not be performed.


5.0.1 (Oct 26, 2010)
---------------------
* Categorize sequence tag schemes (oligo barcode scheme) by Illumina platform (request category)
* Add sortOrder to sequence tags (oligo barcode)


5.0.0 (Oct 25, 2010)
----------------------
* Allow external experiments to be submitted to GNomEx.  
* Provide window to upload and organize files for external experiments.
* Introduced property which determines if default submission is internal or external experiment submision.
* Reworked home page.
* Performance improvements to toXMLDocument in commands called during initialization (Robb).
* Prevent null pointer exception on GetRequest when billing item has null total price.
* Fix bug that was causing Prep instructions column to show up on printable form even though they are blank


4.9.9.1 
----------------------
* Added total dollar amount to billing account.
* User is prevented from submitting experiment request if total charges on billing account (including estimated charges for new request) exceed billing account's total dollar amount.

4.9.9 (Oct 10, 2010)
-----------------------
* Show estimated charges on Submit Request confirm tab.

4.9.8.1 (Oct 6, 2010)
-----------------------
* Fix bug that was ignoring HiSeq illumina request folders for downloads.

4.9.8 (Oct 6, 2010)
-----------------------
* Allow Illumina experiments to be converted from GAIIx -> HiSeq and vice versa.
* Fixed bug so that custom vs catalog slide radio button is correctly set when editing a microarray experiment
* Only allow gnomex admins to change billing account on Edit screen.  GNomEx will automatically reassign billing account on pending or completed billing items.
* Email core facility billing addresses (property-driven) when work authorization is submitted

4.9.7.1 (Oct 3, 2010)
-----------------------
* Fix bugs in 'Views' link that was caused by leftover values in idRequest
* Allow folder name to be saved on Illumina worklist.

4.9.7 (Oct 1, 2010)
------------------------
* Rework experiment download into a expanded file view.
* Provide alternate browser-based downloads to support individual file downloads > 4GB.
* Provide 'view' links in Experiments download page.
* Fixed bug that was causing Seq lanes to go to GAII cluster gen worklist rather than HiSeq worklist when 'Add Services to existing request' submitted (QC->HiSeq corePrep=N)
* Refactored DictionaryManager, separating out PropertyManager class.

4.9.6.1 (Sep 23, 2010)
------------------------
* Fix bug that was causing actionscript error when double-clicking on experiments grid (due to refactoring of ExperimentDetailView).
* Fix bug that was causing 'Please specify at least 1 additional search criteria' on old experiments that do not end with 'R'.
* Provide way to close 'new/edit Analysis Protocol' window (from Analysis Edit).

4.9.6 (Sep 23, 2010)
------------------------
* Support uploading and downloading on GnomEx configured as http rather than https
* Introduced cc number to Sample (hidden for now).  (Robb)
* Fix bug that was causing actionscript error when editing Illumina request's sequence lane.


4.9.5.1 (Sep 14, 2010)
------------------------
* Fixed bug that was looking at wrong file path for downloading Illumina requests (should have ignored revision on request)
* Fixed bug that was causing zip entry to show revision number for flow cell reports
* Show correct 1-color agilent icon in downloads browse view

4.9.5 (Sep 13, 2010)
------------------------
* Fix bug that was causing save error when submitting request on last day of month due to date boundary logic problem when getting current billing period.
* Provide visibility to lock down experiment to owner and owner's lab manager(s)
* Add 'collaborators' list to individual experiments and analysis.  These users are granted read access on the individual experiment/analysis regardless of visibility.
* Add 'close' button on experiment detail window that pops up when user clicks on experiment tree on Analysis Edit window.
* Only send email notifying of work authorization approval to submitter and PI (lab emails), not lab managers.
* When user submitting work authorization form, require either project or activity, but not both.  Expiration date is also mandatory.
* Default to show active billing accounts in 'Reassign billing accounts' popup window in billing. (Checkbox allows inactive billing accounts to be showns as well).
* Rework 'Split billing accounts' window to use dropdowns for lab and billing account rather than editable grid, which had a bug 
  that resulted in billing accounts not being properly refreshed based on selected lab.  Also, show active billing accounts by
  default with ability to also show inactive accounts.
* Get rid of horizontal scroll bars in 'folder' cell of Experiment downloads.
* Disable double-click on Experiments tree so that second click event doesn't interfere with 'Download' click event already in progress.  
  (This was causing view to switch back to Experiment detail view after 'Downloads' link was pressed.)
* Provide download checkboxes and button on 'Files' tab of Analysis detail for more intuitive navigation to downloading analysis files.
* Maintain selection of experiment/analysis tree when 'downloads' link pressed on individual experiment or analysis.  Accomplished this by filtering download list by id of request selected.
* Fix bug that was causing I/O error when guest attempted to download experiment or analysis files (caused by null pointer exception request.getUserPrincipal())
* Fix bug on 'Add Analysis' window that was not filtering analysis group by lab selected in dropdown. 
* Add security filter so that users listed as collaborators on other lab's experiments or analysis don't see empty project or analysis group folders belonging to labs they are not members or managers of.
* For printable request form, if prep instructions for all of the samples are the same, print at top of samples list rather than as column.
* Prompt user before removing price category. (Robb)
* Added code to address Mac mouse wheel problem (this may not work. We’ll need to have David try it and I’ll remove it if it doesn’t help). (Robb)
* Adjusted field widths on Price Category grid. (Robb)
* Added code to automatically add “R” on back end of nothing found in searching for experiment. (Robb)
* Use JAVA_HOME environment variable when setting path in batch program index_gnomex.cmd.
* Fix bug causing blank Analysis to show up when Analysis lookup, followed by Experiments, followed by another Analysis lookup (caused by re-selection bug).



4.9.4 (Aug 31, 2010)
------------------------
* Allow gnomex admins to send broadcast email to all active gnomex users.

4.9.3 (Aug 26,2010)
------------------------
* Fix icons for hiSeq experiments on Download grid
* Insulate calls that directly reference property constants for 
  experiment_directory, analysis_directory and flowcell_directory so that
  downloads will parse main folder correctly from each server's property
  for the filepaths

4.9.2 (Aug 25, 2010)
------------------------
* Fix wording for core lib prep instructions label on Illumina Submit request (barcoded samples)
* Filter flow cells by time period (last week, month, year, etc.) and provide lookup of flow cell by flow cell # or experiment #
* Make work list window layout consistent.
* Centralize code that parses request number into base request number
* Support different experiment, analysis, and flowcell directory properties based on the server name

4.9.1 (Aug 24, 2010)
------------------------
* When gnomex user is submitting a work auth form, show only labs he belong to in dropdown. 
* Provide way to launch gnomex to automatically bring up Work Auth window. 
* For advanced search, show only slides (in dropdown) that are used for public experiments when user is guest or univ-only user
* Fix bug that was causing error on save after adding new Billing account to a lab.
* Add info under 'Trouble downloading' to recommend users download files individually when over 2 GB.  Also, in prompt recommend indiv. file download when exceed 2 GB.
* Allow more than one production server in property production_server when gnomex runs on more than one production server at the same time 


4.9 (Aug 23, 2010)
------------------------
* Added ability for univ users (with or without GNomEx account) to submit work authorization forms in gnomex
* Added ability for admins to approve pending billing accounts (from work auth forms)
* Fix bug that was causing delete request to fail because of fk violation to seq lib treatments.
* Fix bug introduced in 4.8.7 that was causing empty work list for sequencing run and sequencing data pipeline.
* Scrub out slide product, slide design list for guest users and non-gnomex university users
* Scrub out all custom slides not belonging to user's lab
* Don't show 'no slides' message before user has selected microarray app radio button on Microarray Submit Request window.
* Show 'changes have not been saved' message when admin clicks on 'Approved' checkbox for pending billing account of Lab.

4.8.7.1 (Aug 17, 2010)
-------------------------
* Fixed bug introduced in 4.8.7 that was causing billing account dropdown to be blank on Submit Request window for non-admin users.
* Fixed bug introduced in 4.8.7 that was not allowing new billing accounts to be added to a lab.
* Fixed bug introduced in 4.8.7 that was causing Experiment Edit window to not refresh on subsequent experiments after first experiment.
* Rework timing of getting slide product list and slide design list on SubmitWindow so that it only occurs when user selects a microarray request kind.
* Don't show drag-n-drop hint on Experiments and Analysis windows for guest users.
* Multi-group selection window to filter Analysis now allows user to click on row to select lab.
* Analysis filter 'Show public experiments' causes analysis tree to refresh automatically.
* Fix wording on 'Add Services' when no QC experiments found (incorrectly worded as 'No Illumina experiments found'

4.8.7 (Aug 16, 2010)
-------------------------
* Show links on Price sheet tab of Billing window to jump to a particular price sheet.
* Add checkbox 'Show Prices' to price sheet tab of Billing window.
* Reformat filter box in Billing window nav area.
* Fix email body for invoices to work with Gmail HTML renderer.
* Use DictionaryManager cache in DictionaryHelper rather than hibernate queries, reducing DictionaryHelper.loadDictionaries from 2 seconds to < millisecond.
* Improved app startup performance by waiting to run queries to get slides and app user list until needed.  Also, improved performace of lab list by lazing loading billing accounts. (reduced startup on test server from 18 to 7 seconds)
* Fixed bug that was causing vendor, lab, billing class, etc. dropdowns to clear out after switching from Slides to some other window.
* Don't show account number or submission instructions on printable request form when guest is logged into GNomEx.
* On home page, rename 'Show My Experiments' to 'Show Experiments' when guest is logged into GNomEx.  


4.8.6 (Aug 9, 2010)
-------------------------
* Show billing items for other periods in Billing window (when clicking on request from tree)
* Moved 'internal pricing' and 'external pricing' radio buttons to Billing Account tab on Group detail window.
* When looking up experiment by request number, find experiment regardless of revision number (proceeding 'R' in experiment number).
* Show price criteria on Pricing tab of Billing window.
* Put refresh button as last link button on right of top nav panel for billing, experiments for consistent UI layout

4.8.5 patch (July 29, 2010)
-------------------------
* Fixed bug on Illumina submit request that was causing 'Samples' tab to be non-functional when 'Prepped by Core' = 'N'.  Bug introduced with prep instructions.
* Enabled barcoding for Illumina requests where the seq lib is prepped by lab (rather than core)

4.8.5 (July 28, 2010)
-------------------------
* Introduced new Billing Lab Usage report.
* Don't allow Lab to be changed on Analysis edit window.  (Should use drag-n-drop instead)
* Reformat Analysis edit window to leave more room for description.  Moved analysis group to its own tab.
* Move filter widgets and refresh link to top panel in Analysis view.  
* Add ability to filter by multiple labs in Analysis view and ability to filter by analysis created in last week, month, 3 months, or year.
* Add core prep instructions to Submit Illumina Request window.  Show instructions on printable form.
* Fix save bug on Microarray edit screen by refreshing list that populates application radio buttons based on request category.
* Increase width of printable request form from 600 to 700 pixels.


4.8.4 (July 25, 2010)
-------------------------
* Fix email body to work with Outlook 2007 and Gmail HTML renderers.
* Only warn about missing chartfields or blanking out chartfields on PO accounts for billing accounts just updated or added.

4.8.3 (July 21, 2010)
-------------------------
* Fixed bug where reselect on deactivated price caused blacked-out line. (Robb)
* Made change so cursor stays on “complete” after request has been moved from “complete” to “approved.” (Robb)
* Changed External Billing checkbox to Internal/External Pricing radio buttons. (Robb)
* Added PO checkbox to BillingAccounts items and blank out chartfields when checked.  
* Use PO flag on billing account to determine if billing shows under 'External PO' folder rather than using 'External' flag on Lab. (Robb)
* Warn when price, qty, or unit price is blank or 0;


4.8.2 (patch July 9, 2010)
-------------------------
* Fixed protocols links on experiments detail.  Bug was causing last protocol to always be shown.

4.8.2 (July 7, 2010)
-----------------------
* Fixed printable request form for Illumina HiSeq to show barcode (also other code that should test for both GAIIX and HiSeq like sample quality billing plug-in)
* Fixed billing summary report by lab to include HiSeq in Solexa totals.
* Work around unreachable orion dtd in datasources.xml by using dummy entity resolver in lucene BuildIndex java app
* Change Illumina Lib QC plug-in to only create billing item if lab prepped own library (seqPrepByCore=N)
* Bypass creating sample quality billing items and lib prep billing items on Illumina requests where the lab prepped its own library.

4.8.1 (Jul 6, 2010)
-----------------------
* Replaced seq lib treatments with request categories
* Order sequencing application radio buttons
* Added fk constraint on Request to Request Category


4.8 (Patch Jul 2, 2010)
------------------------
* Fixed bug that was causing actionscript error deep in renderer code.  Only happened when clicking on microarray experiment.  Fixed by adding hybs grid in MicroarrayState.

4.8 (July 1, 2010)
------------------------
-	Introduced Illumina HiSeq 2000 request category
-	Introduced new tab in Worfklow for Illumina HiSeq
-	Filter number sequencing cycles by request category (GAIIx vs HiSeq 2000)
-	Order radio buttons (ascending sort) for number seq cycles 
-	Order radio buttons for single vs. paired ends
-	Add notes to number sequencing cycles
-	Allow more than 1 sequencing lane per sample on Illumina new requests
-	Added PhiX error rate to Flow Cell Channel
-	Fixed bug in billing plug-in for Illumina sequencing that matched to incorrect price criteria
-	Add total PO debit and credit rows to Billing GL Interface and change journal entry name to 'MICROARRAY'
-	Billing 'approved' link now jumps to 'Approved (external)' rather than 'Approved'.
-	On experiments page, don't include request category and application in sort.  Sort be request number (descending) instead.
-	Disable request categories on submit request window, add services window if request category is inactive



4.7 patch (June 22, 2010)
------------------------
* Fix bug that was causing null reference on lab combo when non-admin user submitting a request
* Fixed bug that was causing # of additional sequencing lanes on 'add services' to be non-editable for non-admin users
* Don't require sample prep method to be filled in when adding lanes since old requests won't have this filled in
* Fix null ref in sample setup for onGetLab parentDocument.filteredProjectList.refresh()

4.7 (June 20, 2010)
-------------------------
* Ability to add services to an experiment request (amend request)
* Add filter in last 3 months experiment filter
* Include application in  experiment tree label for advanced search, amend request  
* Dictionary editor * maintain selection when dictionary entry added, edited, removed
* Maintain the last selection on billing period combo on Billing screen
* Fixed some compile warnings related to parameterized collections.
* Add lastModifyDate to request (experiment)
* Billing items are now created automatically when new request is submitted or services are added to an existing request.
* Drag-n-drop analysis to analysis group(s).
* Make printable experiment form more print-friendly.
* Add revision number to end of request number when services are added (example 7425R -> 7425R1 -> 7425R2).
* Delete billing items associated with request when request is deleted (warn first).
* Fix bug that was causing non-existent experiment lookup to interfere with subsequence experiment browses
* Add ability to add, delete samples on edit request window
* Document sample, hyb, or seq lane number to correspond to qty (not stored in db yet, waiting for future release to free up notes field.)
* Handle added lanes, hybs, samples in billing plug-ins.
* Just warn if samples on experiment not used on hybs or seq lanes.
* Show warning about adjusting billing when services deleted on edit window.
* Add ability to link other lab's experiments to analysis.
* Ignore inactive price categories when creating billing items 
* Require lab to be selected for admins on Experiment browse if broad criteria or no other criteria provided.
* Altered Lib conc. to support 1 decimal (Illumina workflow Lib Prep)
* Generalize work auth links using properties workauth1_url, workauth1_name, workauth2_url, workauth2_name
* Default printing of request form does not include instructions.  Additional link provided for 'Print all' so that instructions can be printed with request form.
* Price sheet drag-n-drop only works for price categories, so warn user if attempted on prices or price sheets. Also, provide informative message when price category attached to another price sheet or repositioned.
* Add drag-and-drop hint link to Analysis, Experiments, and Billing Price Sheet

4.6.6 (May 13, 2010)
-------------------------
* Organize sequencing applications by theme
* Add sample lib prep conditions/treatments 
* Fix bug that was causing request category name, application name to double, triple
* Fix bug that was causing required border (yellow) to appear around microarray dropdown on microarray edit screen
* Fix typo in instruction box on microarray edit screen, hyb setup tab
* Add 'On Hold', 'In Progress' status to work item; persist status on work item 
* Get rid of Flow Cell Stock work list
* Show status on Illumina cluster gen work list


4.6.5 (Apr 28, 2010)
------------------------
* Format email to verify lab's user accounts with HTML instead of plain text.
* Add isActive to lab.  Show (inactive) verbiage in list of users.
* Fix refresh after save of user and group.
* Fix Type #1090 error caused due to mis-timed event-handling when looking up by experiment or analysis
* Fix scoping when looking up analysis or experiment not in user's lab.
* Show different states on home view for admin, non-submitting user (no lab assigned) or guest.
* Show padding for download button on analysis detail.


4.6.4 (Apr 25, 2010)
------------------------
 * Auto-email group contact to verify active user accounts.
 

4.6.2 (Apr 12, 2010)
-------------------------
* Fix cy3 and cy5 radio buttons so that renderer works with scrolling.  Switched to using checkboxes.
* Fixed problem with seq app and microarray app radio button repeaters that were not refreshing after first submit request.
* Fixed load properties in gnomex security manager to only occur in init.  Used entitity resolver so that if orion site is down, datasources.xml will still be parsed.
* Patch (Apr 13, 2010)
  * Fix problem where qc submit request was showing seq app radio buttons
  * moved seq app radio buttons to its own tab
* Patch (Apr 14, 2010)
  * Fix download list for illumina requests so that multiple GAII folders (with dashes) an appear
  * Seq app radio button on sep tab now.
 

4.6.1 (Mar 30, 2010)
-------------------------
* Fixed bug that was preventing price criteria from being deleted.  Also fixed bug that was preventing multiple criteria from being saved in one shot.
* Fixed bug that was preventing lanes from being added or copied when template had analysis instructions with a single quote.


4.6.3 (Mar 29, 2010)
-------------------------
* New radio group renderer for cy3 and cy5 labels on samples tab to fix bug that shows up when more than one page worth of samples.
* Fix Illumina seq prep by core = n invalid ref problem
* Fix filter problem on slide dropdown when new slide added
 

4.5.3.1 (Mar 15, 2010)
-------------------------
* Fixed analysis upload servlet bug
* Introduced plupload widget for HTML uploader.
* Select user after adding new one.
* Patches
  * Fix Illumina lib prep (radio not selected) causing null ref on # seq cycles radio group. (patched swf Mar 17,2010)


4.5.3  (Mar 12, 2010)
-------------------------
* New HTML uploader to workaround +1 GB Flex upload problem encountered.


