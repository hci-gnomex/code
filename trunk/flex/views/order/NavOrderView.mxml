<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml"     
		   label="Order" width="100%" height="100%" 
		   xmlns:views="views.*" 
		   xmlns:order="views.order.*"
		   xmlns:util="views.util.*"
		   creationPolicy="all"  show="init()"
		   cornerRadius="10"  >
	
	
	
	<mx:Script> 
		<![CDATA[
			import mx.collections.ArrayCollection;
			import mx.collections.XMLListCollection;
			import mx.controls.Alert;
			import mx.controls.Menu;
			import mx.core.DragSource;
			import mx.events.CloseEvent;
			import mx.events.DragEvent;
			import mx.managers.DragManager;
			import mx.rpc.events.ResultEvent;
			
			
			
			[Bindable]
			public var rowCountMessage:String = new String();
			
			
			
			public var isInitialized:Boolean = false;
			
			
			
			public function checkDirty():void {
			}
			
			private function init():void {
				
			}
			
			
			public function getBrowseParameters():Object {
				return null;
			}
			
			public function resetSearchComponents():void {
				
				if (this.MicroarrayCheckbox == null) {
					return;
				}
				
				this.MicroarrayCheckbox.selected = false;
				this.NextGenSeqCheckbox.selected = false;
				this.BioanalyzerCheckbox.selected = false;
				
				this.lastMonthCheckbox.selected = false;
				this.lastWeekCheckbox.selected = false;
				this.lastYearCheckbox.selected = false;
				
				if (this.currentState == null) {
					this.myExperimentsCheckbox.selected = false;
					this.myLabsExperimentsCheckbox.selected = false;
					this.publicExperimentsOtherGroupsCheckbox.selected = false;
				} 
			}
			
			
			private function toggleDateCheckboxes(checkBoxNumber:int):void {
				if (checkBoxNumber == 1) {
					this.lastMonthCheckbox.selected = false;
					this.lastThreeMonthsCheckbox.selected = false;
					this.lastYearCheckbox.selected  = false;
					
				} else if (checkBoxNumber == 2) {
					this.lastWeekCheckbox.selected = false;
					this.lastThreeMonthsCheckbox.selected = false;
					this.lastYearCheckbox.selected  = false;
					
				} else if (checkBoxNumber == 3) {
					this.lastWeekCheckbox.selected  = false;
					this.lastMonthCheckbox.selected = false; 
					this.lastYearCheckbox.selected  = false;
					
				}  else if (checkBoxNumber == 4) {
					this.lastWeekCheckbox.selected  = false;
					this.lastMonthCheckbox.selected = false; 
					this.lastThreeMonthsCheckbox.selected = false;
					
				}   
			} 		 
			
			private function toggleOwnershipCheckboxes(checkBoxNumber:int):void {
				if (checkBoxNumber == 1) {
					this.publicExperimentsOtherGroupsCheckbox.selected = false;
				} else if (checkBoxNumber == 2) { 
					this.myExperimentsCheckbox.selected = false;
				} 
			}
			private function toggleRequestKindCheckboxes(checkBoxNumber:int):void {
				if (checkBoxNumber == 1) {
					this.NextGenSeqCheckbox.selected = false;
					this.BioanalyzerCheckbox.selected  = false;
					
				} else if (checkBoxNumber == 2) {
					this.MicroarrayCheckbox.selected = false;
					this.BioanalyzerCheckbox.selected  = false;
					
				} else if (checkBoxNumber == 3) {
					this.NextGenSeqCheckbox.selected = false;
					this.MicroarrayCheckbox.selected = false;
					
					
				} 
			}
			
			private function toggleAllExperiments():void {
				
			}
			
		]]>
	</mx:Script> 
	
	
	<mx:ArrayCollection id="requestNumbers"  />
	
	<mx:DateFormatter id="dateFormatter" formatString="YYYYMMDD"/>
	
	<mx:VBox width="100%" height="100%" id="vbox1" verticalGap="2">
		<mx:VBox styleName="panelBox"   backgroundImage="@Embed(source='../../assets/filterBar.png')" backgroundSize="100%" width="100%" verticalGap="0">
			<mx:HBox horizontalGap="0" paddingTop="0" paddingBottom="4" paddingLeft="0" horizontalAlign="left" verticalAlign="middle" id="hbox1" >
				<mx:HBox id="hbox4"  horizontalGap="10" paddingLeft="0"> 
					<mx:HBox horizontalGap="0" height="100%" verticalAlign="middle" verticalGap="0" paddingLeft="2" horizontalAlign="right" paddingRight="0" id="hbox2">
						<mx:RadioButtonGroup id="experimentRadioGroup"/>
						<mx:RadioButton label="My experiments" id="myExperimentsCheckbox"  groupName="experimentRadioGroup" letterSpacing=".4" horizontalGap="0" styleName="labelSmall" toolTip="Experiments that I submitted">
							<mx:click></mx:click>
						</mx:RadioButton>
						<mx:RadioButton label="My lab" id="myLabsExperimentsCheckbox"  selected="true"  groupName="experimentRadioGroup" paddingLeft="2" horizontalGap="0" styleName="labelSmall">
							<mx:toolTip><![CDATA[Experiments of my lab,  those I collaborate on, and those visible to to my institution]]></mx:toolTip>
							<mx:click></mx:click>
						</mx:RadioButton>
						<mx:RadioButton label="Other labs" id="publicExperimentsOtherGroupsCheckbox"   groupName="experimentRadioGroup" paddingLeft="2" letterSpacing=".4" horizontalGap="0" styleName="labelSmall">
							<mx:toolTip>Other lab's experiments that are available to public</mx:toolTip>
							<mx:click></mx:click>
						</mx:RadioButton>
						<mx:RadioButton label="All" id="userAllExperimentsCheckbox"   groupName="experimentRadioGroup" paddingLeft="2" letterSpacing=".4" horizontalGap="0" styleName="labelSmall">
							<mx:toolTip>All experiments I have access to</mx:toolTip>
							<mx:click></mx:click>
						</mx:RadioButton>
					</mx:HBox>
					<mx:VRule height="20" id="vrule1"/>
					<mx:HBox horizontalGap="0" height="100%" verticalAlign="middle" verticalGap="0" horizontalAlign="right" paddingRight="0"  id="hbox3">
						<mx:CheckBox id="lastWeekCheckbox" label="In last week" paddingRight="0" horizontalGap="0" paddingLeft="2"   styleName="labelSmall">
							<mx:click>toggleDateCheckboxes(1);</mx:click>
						</mx:CheckBox>
						<mx:CheckBox  id="lastMonthCheckbox" label="month"  paddingRight="0" paddingLeft="2" horizontalGap="0"   styleName="labelSmall">
							<mx:click>toggleDateCheckboxes(2);</mx:click>
						</mx:CheckBox>
						<mx:CheckBox  id="lastThreeMonthsCheckbox" label="3 months"  paddingRight="0" paddingLeft="2" horizontalGap="0"   styleName="labelSmall">
							<mx:click>toggleDateCheckboxes(3);</mx:click>
						</mx:CheckBox>		    		
						<mx:CheckBox  id="lastYearCheckbox" label="year"  paddingLeft="2" paddingRight="0" horizontalGap="0"   styleName="labelSmall">
							<mx:click>toggleDateCheckboxes(4);</mx:click>
						</mx:CheckBox>
					</mx:HBox>
				</mx:HBox>
				
			</mx:HBox>
			<mx:HBox horizontalGap="10" paddingTop="0" paddingBottom="4" paddingLeft="0" horizontalAlign="left" verticalAlign="middle" id="hbox1a" >
				<mx:HBox horizontalGap="0" id="hbox5">
					<mx:CheckBox label="Microarray" id="MicroarrayCheckbox" horizontalGap="0" styleName="labelSmall" paddingLeft="2">
						<mx:click>toggleRequestKindCheckboxes(1);</mx:click>
					</mx:CheckBox>
					<mx:CheckBox label="Next Gen Sequencing"  id="NextGenSeqCheckbox"  paddingLeft="2" horizontalGap="0" styleName="labelSmall">
						<mx:click>toggleRequestKindCheckboxes(2);</mx:click>
					</mx:CheckBox>
					<mx:CheckBox label="Sample Quality"  id="BioanalyzerCheckbox" paddingLeft="2" horizontalGap="0" styleName="labelSmall">
						<mx:click>toggleRequestKindCheckboxes(3);</mx:click>
					</mx:CheckBox>
				</mx:HBox>
				<mx:VRule height="20" id="vrule1a"/>
				<mx:CheckBox  id="externalExperimentsOnlyCheckbox" label="External Experiments only"  paddingLeft="2" paddingRight="0" horizontalGap="0"   styleName="labelSmall">
					<mx:click></mx:click>
				</mx:CheckBox>
				<mx:VRule height="20" id="vrule2"/>
				<mx:LinkButton label="Refresh" icon="@Embed(source='../../assets/action_refresh.gif')"  textDecoration="underline" paddingRight="0" id="linkbutton2" paddingLeft="0"/>
				
			</mx:HBox>
			
			
		</mx:VBox>
		
		<mx:HDividedBox height="100%" width="100%" id="hdividedbox1">
			
			
			
			<mx:VBox styleName="panelBox"   width="260" height="100%" id="navPanel" >
				<mx:HBox width="100%">
					<mx:Label id="titleLabel" styleName="titleLabel" text="Experiments"/>
					<mx:Label id="messageLabel" styleName="labelSmall" textAlign="right" width="100%"/>
				</mx:HBox> 
				<mx:VBox id="navContainer" width="100%" height="100%" verticalGap="0" paddingTop="0" label="Experiments">
					
					<mx:VBox id="treeContainer"  dropShadowEnabled="true" width="100%" height="100%" paddingLeft="2" verticalGap="0" >
						<mx:HBox horizontalGap="0">
							<mx:ViewStack id="treeExpansionStack" width="100%">
								<mx:HBox width="124" horizontalAlign="leftt">
									<mx:LinkButton   label="Expand projects" click="{treeExpansionStack.selectedIndex = 1;}" textDecoration="underline" />
								</mx:HBox>
								<mx:HBox width="100%" horizontalAlign="left">
									<mx:LinkButton  label="Collapse projects" click="{treeExpansionStack.selectedIndex = 0;}" textDecoration="underline" />					    	
								</mx:HBox>
							</mx:ViewStack>
							<mx:VBox styleName="hintBox" id="vbox2">
								<mx:LinkButton label="Drag-and-drop hint" 
											   click="{Alert.show('Drag-and-drop experiment to move to another project.')}" id="linkbutton1" styleName="hintLink" icon="@Embed(source='../../assets/information.png')">
								</mx:LinkButton>
							</mx:VBox>
						</mx:HBox>
						
						<mx:Tree width="100%" height="100%" ></mx:Tree>
						
					</mx:VBox>
					
				</mx:VBox>
				<mx:ControlBar width="100%" verticalAlign="top">
					<mx:VBox verticalGap="0">
						<mx:HBox>
							<mx:LinkButton label="New project" id="newProjectButton"  
										   icon="@Embed('../../assets/folder_add.png')" 
										   toolTip="New project..." 
										   enabled="false" 
										   disabledIcon="@Embed(source='../../assets/folder_add_disable.png')" textDecoration="underline"/>
							<mx:LinkButton  label="Delete project" id="deleteProjectButton" icon="@Embed('../../assets/folder_delete.png')" 
											
											toolTip="Delete project" enabled="false" textDecoration="underline">
								<mx:disabledIcon>@Embed(source='../../assets/folder_delete_disable.png')</mx:disabledIcon>
							</mx:LinkButton>
							
						</mx:HBox>
						<mx:HBox>
							<mx:LinkButton  label="Delete experiment" id="deleteExperimentButton"  icon="@Embed(source='../../assets/delete.png')"
											
											toolTip="Delete experiment" textDecoration="underline">
								<mx:disabledIcon>@Embed(source='../../assets/delete_disable.png')</mx:disabledIcon>
							</mx:LinkButton>
						</mx:HBox>
						
					</mx:VBox>
					
				</mx:ControlBar> 
			</mx:VBox>  
			
			
			
			
			
			
			<mx:ViewStack id="theViews" creationPolicy="all" visible="true" width="100%" height="100%">
				
				<order:OrderBrowseView id="browseView"  width="100%" height="100%">
				</order:OrderBrowseView>
				
			</mx:ViewStack>
			
		</mx:HDividedBox>
	</mx:VBox>
	
	<!--<mx:states>
	<mx:State name="GuestState">
	<mx:RemoveChild target="{hbox2}"/>
	<mx:RemoveChild target="{vrule1}"/>
	<mx:RemoveChild target="{hbox3}"/>
	<mx:AddChild relativeTo="{externalExperimentsOnlyCheckbox}" position="before" target="{hbox3}"/>
	<mx:RemoveChild target="{hbox1}"/>
	<mx:AddChild relativeTo="{hbox3}" position="lastChild">
	<mx:VRule height="18" id="vrule0" width="0"/>
	</mx:AddChild>
	<mx:AddChild relativeTo="{externalExperimentsOnlyCheckbox}" position="before">
	<mx:VRule height="20" id="vrule3"/>
	</mx:AddChild>
	</mx:State>
	
	<mx:State name="AdminState">
	<mx:RemoveChild target="{myExperimentsCheckbox}"/>
	<mx:RemoveChild target="{publicExperimentsOtherGroupsCheckbox}"/>
	<mx:RemoveChild target="{myLabsExperimentsCheckbox}"/>
	<mx:AddChild relativeTo="{hbox2}"  position="firstChild">
	<mx:HBox horizontalGap="0" verticalAlign="middle">
	<mx:CheckBox label="All experiments" styleName="labelSmall" horizontalGap="0" id="allExperimentsCheckbox" click="toggleAllExperiments();getProjectRequestList.send(getBrowseParameters());"/>
	<mx:VRule height="20"/>
	<mx:Label id="groupLabel" visible="true" text="Group" paddingBottom="0" styleName="labelSmall" paddingLeft="2"/>
	<mx:ComboBox id="browseLabCombo" 
	labelField="@name"
	dataProvider="{parentApplication.promptedLabList}"
	change="{this.allExperimentsCheckbox.selected = false;this.browseUserCombo.selectedIndex = 0;selectedIdLab=null;selectedIdProject=null;selectedIdRequest=null;selectedRequestNumber=null;getProjectRequestList.send(getBrowseParameters());getMembersOfLab()}"  
	visible="true"  width="150">
	</mx:ComboBox>
	<mx:HBox  horizontalGap="0"  verticalAlign="middle" id="hbox6">
	<mx:Label id="userLabel" visible="true" text="Requester" paddingBottom="0" paddingLeft="2"  styleName="labelSmall"/>
	<mx:ComboBox id="browseUserCombo" 
	labelField="@displayName"
	dataProvider="{appUsers}"
	change="this.allExperimentsCheckbox.selected = false;selectedIdProject=null;selectedIdRequest=null;selectedRequestNumber=null;getProjectRequestList.send(getBrowseParameters())"  
	visible="true"  width="140">
	</mx:ComboBox>
	</mx:HBox>
	
	</mx:HBox>
	</mx:AddChild>
	<mx:RemoveChild target="{vrule1}"/>
	<mx:SetEventHandler target="{externalExperimentsOnlyCheckbox}" name="click" handler="this.allExperimentsCheckbox.selected = false;selectedIdLab=null;selectedIdProject=null;selectedIdRequest=null;selectedRequestNumber=null;getProjectRequestList.send(getBrowseParameters());"/>
	<mx:RemoveChild target="{userAllExperimentsCheckbox}"/>
	<mx:AddChild relativeTo="{hbox3}" position="before">
	<mx:VRule height="20" id="vrule4"/>
	</mx:AddChild>
	
	
	</mx:State>
	
	
	</mx:states>-->
	
	
	
</mx:Canvas>
