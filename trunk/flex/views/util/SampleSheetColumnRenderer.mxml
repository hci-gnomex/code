<?xml version="1.0" encoding="utf-8"?>
<mx:HBox xmlns:mx="http://www.adobe.com/2006/mxml" initialize="onInitialize()" horizontalAlign="center" horizontalScrollPolicy="off" verticalScrollPolicy="off">
	<mx:Script>
		<![CDATA[
			import mx.collections.ArrayCollection;
			import mx.collections.XMLListCollection;
			import mx.events.ListEvent;
			
			[Bindable]
			//private var ssColumns:XMLListCollection;
			private var ssColumns:ArrayCollection;
			
			private function onInitialize():void{
				//Creating the initial dataProvider for the combo box in the initialize event
				//so that in the set data function this data is available
				/*
				ssColumns = new ArrayCollection([{label:"Click here to select column", data:"0"},
					{label:"Column 1", data:"1"},
					{label:"Column 2", data:"2"},
					{label:"Column 3", data:"3"},
					{label:"Column 4", data:"4"}])
				ssColumns.addItem({label:"Click here to select column", data:"0"});
				ssColumns.addItem({label:"Column 1", data:"1"});
				ssColumns.addItem({label:"Column 2", data:"2"});
				ssColumns.addItem({label:"Column 3", data:"3"});
				ssColumns.addItem({label:"Column 4", data:"4"});
				var myLabel:String = "Column 5";
				var myData:String = "5";
				ssColumns.addItem({label:myLabel, data:myData});
				*/


				ssColumns = new ArrayCollection();
				//ssColumns = new XMLListCollection();
				for each (var node : XML in this.parentDocument.sampleSheetColumnList) {
					//ssColumns.addItem(node);
					ssColumns.addItem({label:node.@label, data:node.@data});
				}


			}
			
			override public function set data(value:Object):void{
				if(value != null){
					super.data = value;
					if(combo && ssColumns){
						//find out the index of item where the data matches the risk level
						var ssColumnItem:Object;
						for(var i:int=0; i<ssColumns.length; i++){
							ssColumnItem = ssColumns.getItemAt(i);
							if(ssColumnItem.data == value.@selectedSSColumn){
								//set the value of the combo box to reflect the 
								//appropriate value of risk in the item of dataProvider of the dataGrid
								combo.selectedItem = ssColumnItem;
								break;
							}
						}
					}
				}
			}
			
			private function onSampleSheetColumnChange(event:ListEvent):void {
				//dispatch an event which is handled at the application level
				//the third Param is the new risk level which is obtained from the combo box
				var sampleSheetColumnEvent:SampleSheetColumnEvent = new SampleSheetColumnEvent(SampleSheetColumnEvent.CHANGE, this.data, event.target.value, true);
				this.dispatchEvent(sampleSheetColumnEvent);
			}
		]]>
	</mx:Script>
	<mx:ComboBox id="combo" dataProvider="{ssColumns}" change="onSampleSheetColumnChange(event)"/>
</mx:HBox>
