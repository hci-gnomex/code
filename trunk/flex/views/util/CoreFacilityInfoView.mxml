<?xml version="1.0" encoding="utf-8"?>
<mx:VBox styleName="panelWelcomeBox" xmlns:mx="http://www.adobe.com/2006/mxml"   
	xmlns:views="views.*"          
	xmlns:util="views.util.*"
	creationPolicy="all" 
	preinitialize="init()"
	width="100%" height="100%" 
	verticalGap="0" borderStyle="solid" 
	borderThickness="2" horizontalAlign="center" 
	backgroundColor="#DDDDDD" backgroundAlpha=".5" >
	
	<mx:Script>
		<![CDATA[			
			
			[Bindable]
			public var coreFacility:Object;
			[Bindable]
			public var useShortDescription:Boolean;
			
			private function init():void {
				// If used as an item renderer, this will make sure the core facility is assigned.
				if ( this.data ) {
					this.coreFacility = data;
				}
			}
			
			
		]]>
	</mx:Script>
	<mx:HBox width="100%" verticalAlign="middle">
		
		<mx:Image id="contactImage" horizontalAlign="center" source="{coreFacility.@contactImage}" scaleContent="true"  height="75" smoothBitmapContent="true"/>	
		
		<mx:VBox horizontalAlign="center" width="100%" >
			<mx:Label text="{coreFacility.@facilityName+ ' Core'}" fontSize="14"/>
			<mx:Text text="{coreFacility.@contactName}" fontWeight="bold"/>
			
			<mx:HBox horizontalGap="0" verticalAlign="middle">
				<mx:Text text="Phone: " fontStyle="italic"/>
				<mx:Text text="{coreFacility.@contactPhone}" />
				<mx:Text paddingLeft="4" paddingRight="0" text="Email: " fontStyle="italic"/>
				<mx:LinkButton id="emailLink" label="{coreFacility.@contactEmail}" click="navigateToURL(new URLRequest('mailto:' + coreFacility.@contactEmail));event.stopImmediatePropagation()" textDecoration="underline" color="#0000ff" paddingTop="1"/>
			</mx:HBox>
		</mx:VBox>
		
	</mx:HBox>
	<mx:HRule width="100%"/>
	<mx:HBox horizontalGap="0" verticalAlign="middle">
		<mx:Text text="Submit an" />
		<mx:LinkButton id="requestLink" label="experiment request" 
					   click="{parentApplication.homeView.submitRequest(coreFacility.@idCoreFacility);event.stopImmediatePropagation()}" 
					   textDecoration="underline" color="#0000ff" paddingLeft="0" paddingRight="0"/>
		<mx:Text text="or" />
		<mx:LinkButton id="workAuthLink" label="work auth" 
					   click="{parentApplication.showWorkAuthWindow(null, coreFacility.@idCoreFacility);event.stopImmediatePropagation()}" 
					   textDecoration="underline" color="#0000ff" paddingLeft="0" paddingRight="0"/>
		<mx:Text text="{'to ' + coreFacility.@facilityName}"/>
	</mx:HBox>
	
	<mx:TextArea text="{useShortDescription ? coreFacility.@shortDescription : coreFacility.@description}" width="100%" height="100%" textAlign="left" editable="false" selectable="false"  backgroundColor="#FFFFFF"/>
	

</mx:VBox>
